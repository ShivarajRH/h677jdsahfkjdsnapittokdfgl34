ALTER TABLE `pnh_sch_discount_track` ADD COLUMN `dealid` BIGINT(0) NULL AFTER `catid`; 
ALTER TABLE `pnh_sch_discount_brands` ADD COLUMN `dealid` BIGINT(11) DEFAULT 0 NULL AFTER `discount`;  


## Reconcilation and Reciept status date updates 
CREATE TABLE `t_deal_publish_changelog` (                
                            `id` INT(10) UNSIGNED NOT NULL AUTO_INCREMENT,         
                            `item_id` BIGINT(20) UNSIGNED NOT NULL,                
                            `is_publish` TINYINT(1) DEFAULT '0',                   
                            `remarks` TEXT,                                        
                            `created_by` INT(10) DEFAULT '0',                      
                            `created_on` DATETIME NOT NULL,                        
                            PRIMARY KEY (`id`)                                     
                          );


CREATE TABLE `pnh_t_receipt_reconcilation` (   
                               `id` BIGINT(20) NOT NULL AUTO_INCREMENT,     
                               `debit_note_id` BIGINT(20) DEFAULT '0',      
                               `invoice_no` BIGINT(20) DEFAULT NULL,        
                               `dispatch_id` INT(100) DEFAULT NULL,         
                               `inv_amount` DOUBLE DEFAULT '0',             
                               `unreconciled` DOUBLE DEFAULT '0',           
                               `created_on` INT(50) DEFAULT NULL,           
                               `created_by` INT(20) DEFAULT NULL,           
                               `modified_on` VARCHAR(50) DEFAULT NULL,      
                               `modified_by` INT(20) DEFAULT NULL,          
                               `is_invoice_cancelled` INT(20) DEFAULT '0',  
                               PRIMARY KEY (`id`)                           
                             );

CREATE TABLE `pnh_t_receipt_reconcilation_log` (  
                                   `logid` BIGINT(20) NOT NULL AUTO_INCREMENT,     
                                   `credit_note_id` INT(50) DEFAULT NULL,          
                                   `receipt_id` INT(50) DEFAULT NULL,              
                                   `reconcile_id` INT(50) DEFAULT NULL,            
                                   `is_invoice_cancelled` INT(20) DEFAULT '0',     
                                   `reconcile_amount` DOUBLE DEFAULT '0',          
                                   `is_reversed` INT(11) DEFAULT '0',              
                                   `created_on` INT(100) DEFAULT NULL,             
                                   `created_by` INT(20) DEFAULT NULL,              
                                   `remarks` VARCHAR(100) DEFAULT NULL,            
                                   PRIMARY KEY (`logid`)                           
                                 ) ;
ALTER TABLE `pnh_t_receipt_info` ADD COLUMN `unreconciliation_amount` DOUBLE  DEFAULT '0' NULL  AFTER `receipt_amount`;
ALTER TABLE `pnh_franchise_account_stat` ADD COLUMN `unreconciled_value` DOUBLE   NULL  AFTER `is_correction`, ADD COLUMN `unreconciled_status` VARCHAR (11) DEFAULT 'pending' NULL  AFTER `unreconciled_value`;
#update pnh_t_receipt_info set unreconciliation_amount = receipt_amount;
ALTER TABLE `pnh_franchise_account_summary` ADD COLUMN `unreconciled_value` DOUBLE  DEFAULT '0' NULL  AFTER `created_by`, ADD COLUMN `unreconciled_status` VARCHAR (50) DEFAULT 'pending' NULL  AFTER `unreconciled_value`;
 

ALTER TABLE pnh_t_receipt_info ADD COLUMN cheq_realized_on VARCHAR(255) AFTER activated_on; 
ALTER TABLE pnh_m_deposited_receipts ADD COLUMN cheq_cancelled_on DATETIME AFTER dbt_amt;

CREATE TABLE `pnh_acknowledgement_print_log` (
`sno` BIGINT(20) NOT NULL AUTO_INCREMENT,
`log_id` VARCHAR(150) DEFAULT NULL,
`tm_emp_id` VARCHAR(100) DEFAULT NULL,
`be_emp_id` VARCHAR(100) DEFAULT NULL,
`p_inv_no` VARCHAR(100) NOT NULL,
`created_on` VARCHAR(50) DEFAULT NULL,
`created_by` INT(30) DEFAULT NULL,
`status` INT(10) DEFAULT '0',
`count` INT(100) DEFAULT '0',
PRIMARY KEY (`sno`)
);

# Apr_04_2014
ALTER TABLE `pnh_member_insurance` ADD COLUMN `mem_receipt_no` BIGINT NULL AFTER `pincode`,
 ADD COLUMN `mem_receipt_date` DATE NULL AFTER `mem_receipt_no`,
  ADD COLUMN `mem_receipt_amount` DOUBLE NULL AFTER `mem_receipt_date`, CHANGE `created_by` `created_by` TINYINT(20) NULL,
   CHANGE `created_on` `created_on` DATETIME NULL, ADD COLUMN `modified_by` TINYINT(20) NULL AFTER `created_on`,
    ADD COLUMN `modified_on` DATETIME NULL AFTER `modified_by`;

ALTER TABLE `pnh_member_offers` CHANGE `created_on` `created_on` DATETIME NULL, ADD COLUMN `modified_by` TINYINT(20) NULL AFTER `created_on`, ADD COLUMN `modified_on` DATETIME NULL AFTER `modified_by`;
ALTER TABLE `pnh_member_offers_log` ADD COLUMN `created_on` DATETIME NULL AFTER `status`, ADD COLUMN `created_by` TINYINT(20) NULL AFTER `created_on`;
ALTER TABLE `pnh_member_insurance` ADD INDEX (`fid`, `mid`, `opted_insurance`, `offer_status`, `itemid`, `mob_no`); 
ALTER TABLE `pnh_member_offers` ADD INDEX (`member_id`, `franchise_id`, `offer_type`, `pnh_pid`, `transid_ref`, `insurance_id`, `process_status`);
ALTER TABLE `pnh_member_insurance_menu` ADD INDEX (`menu_id`, `greater_than`, `less_than`, `is_active`);

# =========================================================================
#Apr_05_2014
UPDATE pnh_member_offers mo 
JOIN pnh_member_insurance mi ON mi.insurance_id = mo.insurance_id
SET mo.insurance_id=mi.sno;

# =========================================================================
#Apr_07_2014
#order_id field added
ALTER TABLE `pnh_member_insurance` ADD COLUMN `order_id` BIGINT NULL AFTER `itemid`;
ALTER TABLE `pnh_member_offers` ADD COLUMN `order_id` BIGINT NULL AFTER `pnh_pid`;

# To insert order id in member offers table
UPDATE pnh_member_offers mo 
JOIN king_dealitems di ON `pnh_id` = mo.`pnh_pid`
JOIN king_orders o ON o.itemid = di.id AND o.transid=mo.`transid_ref`
SET mo.`order_id` = o.`id`;

# To insert order id in member insurance table
UPDATE pnh_member_offers mo 
JOIN pnh_member_insurance mi ON mi.sno = mo.`insurance_id`
JOIN king_dealitems di ON `pnh_id` = mo.`pnh_pid`
JOIN king_orders o ON o.itemid = di.id AND o.transid=mo.`transid_ref`
SET mi.`order_id` = o.`id`;
# =========================================================================

/*---Vendor deal import throug api db changes--*/
CREATE TABLE `m_vendor_api_info` (                       
                     `id` BIGINT(20) NOT NULL AUTO_INCREMENT,               
                     `vendor_id` BIGINT(20) DEFAULT NULL,                   
                     `api_link` VARCHAR(255) DEFAULT NULL,                  
                     `type` VARCHAR(255) DEFAULT NULL,                      
                     PRIMARY KEY (`id`)                                     
                   );

CREATE TABLE `m_client_brand_link` (                     
                       `id` BIGINT(20) NOT NULL AUTO_INCREMENT,               
                       `brand_id` BIGINT(20) DEFAULT NULL,                    
                       `client_brand` VARCHAR(255) DEFAULT NULL,              
                       `created_on` DATETIME DEFAULT NULL,                    
                       `created_by` INT(11) DEFAULT NULL,                     
                       PRIMARY KEY (`id`)                                     
                     );
CREATE TABLE `m_client_category_link` (                  
                          `id` BIGINT(20) NOT NULL AUTO_INCREMENT,               
                          `category_id` BIGINT(20) DEFAULT NULL,                 
                          `client_category` VARCHAR(255) DEFAULT NULL,           
                          `created_on` DATETIME DEFAULT NULL,                    
                          `created_by` INT(11) DEFAULT NULL,                     
                          PRIMARY KEY (`id`)                                     
                        );
CREATE TABLE `t_vendor_product_import_log` (                       
                               `id` BIGINT(20) NOT NULL AUTO_INCREMENT,                         
                               `vendor_id` BIGINT(20) DEFAULT NULL,                             
                               `type` VARCHAR(255) DEFAULT NULL,                                
                               `data` TEXT,                                                     
                               `status` INT(1) DEFAULT NULL COMMENT '1:updated,2:not updated',  
                               `msg` TEXT,                                                      
                               `created_on` DATETIME DEFAULT NULL,                              
                               `created_by` INT(11) DEFAULT NULL,                               
                               `modified_on` DATETIME DEFAULT NULL,                             
                               `modified_by` INT(11) DEFAULT NULL,                              
                               PRIMARY KEY (`id`)                                               
                             );
CREATE TABLE `m_client_menu_link` (                      
                      `id` BIGINT(20) NOT NULL AUTO_INCREMENT,               
                      `menu_id` BIGINT(20) DEFAULT NULL,                     
                      `client_menu` VARCHAR(255) DEFAULT NULL,               
                      `created_on` DATETIME DEFAULT NULL,                    
                      `created_by` INT(11) DEFAULT NULL,                     
                      PRIMARY KEY (`id`)                                     
                    );

ALTER TABLE `king_orders` ADD COLUMN `order_from_vendor` INT (11)  NULL  AFTER `insurance_amount`, ADD COLUMN `vendor_order_refe_id` VARCHAR (255)  NULL  AFTER `order_from_vendor`
ALTER TABLE `king_orders` DROP COLUMN `product_id`,ADD COLUMN `order_product_id` BIGINT (20)  NULL  AFTER `itemid`
ALTER TABLE `t_vendor_deal_import_log` ADD COLUMN `vendor_id` BIGINT (20)  NULL  AFTER `id`;

/*---Vendor deal import throug api db changes--*/

# Apr_08_2014
#DROP TABLE IF EXISTS pnh_loyalty_points;
CREATE TABLE `pnh_loyalty_points` (
  `id` INT(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `menu_id` BIGINT(15) DEFAULT NULL,
  `amount` INT(10) UNSIGNED NOT NULL,
  `points` INT(10) UNSIGNED NOT NULL,
  `is_active` TINYINT(11) DEFAULT '1',
  `valid_days` BIGINT(11) DEFAULT NULL,
  `created_on` DATETIME DEFAULT NULL,
  `updated_on` DATETIME DEFAULT NULL,
  `created_by` INT(11) DEFAULT NULL,
  PRIMARY KEY (`id`)
);

ALTER TABLE `pnh_member_insurance` ADD COLUMN `status_ship` TINYINT(11) DEFAULT 0 NULL AFTER `mem_receipt_amount`, ADD COLUMN `status_deliver` TINYINT(11) DEFAULT 0 NULL AFTER `status_ship`;
#=====================================================================

# Apr_10_2014
ALTER TABLE `king_orders` ADD COLUMN `pnh_member_fee` DOUBLE NULL AFTER `vendor_order_refe_id`;
CREATE TABLE `m_vendor_product_images` (    
                           `id` BIGINT(20) NOT NULL AUTO_INCREMENT,  
                           `vendor_id` BIGINT(20) DEFAULT NULL,      
                           `item_id` BIGINT(20) DEFAULT NULL,        
                           `main_image` MEDIUMTEXT,                  
                           `other_images` TEXT,                      
                           `created_by` INT(11) DEFAULT NULL,        
                           `created_on` DATETIME DEFAULT NULL,       
                           PRIMARY KEY (`id`)                        
                         );
ALTER TABLE `m_vendor_info` ADD COLUMN `api_access_key` VARCHAR (255)  NULL  AFTER `vendor_code`;
ALTER TABLE `t_vendor_product_import_log` ADD COLUMN `group_id` BIGINT (20)  NULL  AFTER `vendor_id`;
ALTER TABLE `m_product_info` CHANGE `product_name` `product_name` VARCHAR (200)  NULL  COLLATE utf8_general_ci 

#=====================================================================
# Apr_12_2014
ALTER TABLE `king_orders` ADD COLUMN `loyality_point_value` DOUBLE NULL AFTER `pnh_member_fee`;

# Added pnh_member_fee field
ALTER TABLE `pnh_member_offers` ADD COLUMN `pnh_member_fee` FLOAT(25) NULL AFTER `mem_fee_applicable`; 

# set member fee in offers table
UPDATE pnh_member_offers mo SET mo.pnh_member_fee = 50 WHERE mem_fee_applicable = 1;
#=====================================================================
#Apr_15_2014
CREATE TABLE `pnh_member_fee`( `id` BIGINT(11) NOT NULL AUTO_INCREMENT, `member_id` INT(10) DEFAULT 0, `transid` VARCHAR(25), `invoice_no` BIGINT(11) DEFAULT 0, `amount` DOUBLE, `status` TINYINT(1) DEFAULT 0, `created_on` DATETIME, `created_by` INT(5) DEFAULT 0, `modified_on` DATETIME, `modified_by` INT(5) DEFAULT 0, PRIMARY KEY (`id`) );
#===============================================

// NON SK IMEI PROCESS DB Changes

CREATE TABLE `non_sk_imei_insurance_orders` (
  `id` BIGINT(11) NOT NULL AUTO_INCREMENT,
  `franchise_id` BIGINT(11) DEFAULT NULL,
  `order_id` BIGINT(15) DEFAULT NULL,
  `transid` VARCHAR(255) DEFAULT NULL,
  `userid` BIGINT(11) DEFAULT NULL,
  `member_id` BIGINT(11) DEFAULT NULL,
  `nonsk_imei_no` VARCHAR(255) DEFAULT NULL,
  `model_no` VARCHAR(255) DEFAULT NULL,
  `model_value` DOUBLE(10,2) DEFAULT '0.00',
  `insurance_id` BIGINT(11) DEFAULT NULL,
  `insurance_amount` DOUBLE(10,2) NOT NULL DEFAULT '0.00',
  `pnh_member_fee` DOUBLE(10,2) NOT NULL DEFAULT '0.00',
  `created_on` DATETIME DEFAULT NULL,
  `created_by` INT(12) DEFAULT NULL,
  PRIMARY KEY (`id`)
) 

ALTER TABLE `king_orders` CHANGE `insurance_amount` `insurance_amount` DOUBLE(10,2) DEFAULT 0.00 NOT NULL, CHANGE `pnh_member_fee` `pnh_member_fee` DOUBLE(10,2) DEFAULT 0.00 NOT NULL; 

#================================================================================================
#Apr_16_2014
ALTER TABLE `king_transactions` ADD COLUMN `order_for` INT(11) DEFAULT 0 NOT NULL AFTER `credit_days`;
#================================================================================================
# Apr_18_2014
CREATE TABLE `pnh_member_insurance_printlog`( `id` BIGINT(11) NOT NULL AUTO_INCREMENT, `insurance_id` BIGINT(11), `printcount` INT(150) DEFAULT 0, `printed_by` TINYINT(11) DEFAULT 0, `last_printed_on` DATETIME, PRIMARY KEY (`id`) );
#====================================================
# Apr_19_2014
ALTER TABLE king_orders ADD COLUMN lpoints_valid_days DOUBLE AFTER loyality_point_value;
#====================================================
# Apr_22_2014
ALTER TABLE `pnh_member_offers` ADD COLUMN `remarks` VARCHAR(100) NULL AFTER `referred_status`;
#=====================================================

/*[4:33:00 PM][2366 ms]*/ ALTER TABLE `king_orders` ADD COLUMN `has_nonsk_imei_insurance` TINYINT(11) DEFAULT 0 NOT NULL AFTER `pnh_member_fee`; 
#================================================================================================
# Apr_24_2014
CREATE TABLE `nonskimei_mem_fee_insu_amt` (
  `id` BIGINT(11) NOT NULL AUTO_INCREMENT,
  `member_id` INT(10) DEFAULT '0',
  `transid` VARCHAR(25) DEFAULT NULL,
  `invoice_no` BIGINT(11) DEFAULT '0',
  `pnh_member_fee` DOUBLE DEFAULT NULL,
  `insurance_amt` DOUBLE DEFAULT NULL,
  `status` TINYINT(1) DEFAULT '0',
  `created_on` DATETIME DEFAULT NULL,
  `created_by` INT(5) DEFAULT '0',
  `modified_on` DATETIME DEFAULT NULL,
  `modified_by` INT(5) DEFAULT '0',
  PRIMARY KEY (`id`)
);
#=====================================================
# Apr_25_2014
INSERT INTO `m_config_params` (`name`, `value`) VALUES ('FRAN_TYPE_ELECTRONIC', '112,102');
#======================================================

#Apr_25_4_2014
ALTER TABLE `m_vendor_api_info` ADD COLUMN `file_format` ENUM ('CSV','XML','TXT') DEFAULT 'CSV' NULL  AFTER `type`, ADD COLUMN `mapping_tmpl_id` INT (11)  NULL  AFTER `file_format`;
CREATE TABLE `m_vendor_api_templates` (                  
                          `id` BIGINT(20) NOT NULL AUTO_INCREMENT,               
                          `product_name` VARCHAR(255) DEFAULT NULL,              
                          `sku_code` VARCHAR(255) DEFAULT NULL,                  
                          `product_code` VARCHAR(255) DEFAULT NULL,              
                          `model_code` VARCHAR(255) DEFAULT NULL,                
                          `qty` VARCHAR(255) DEFAULT NULL,                       
                          `short_description` VARCHAR(255) DEFAULT NULL,         
                          `category` VARCHAR(255) DEFAULT NULL,                  
                          `category1` VARCHAR(255) DEFAULT NULL,                 
                          `category2` VARCHAR(255) DEFAULT NULL,                 
                          `category3` VARCHAR(255) DEFAULT NULL,                 
                          `category4` VARCHAR(255) DEFAULT NULL,                 
                          `brand` VARCHAR(255) DEFAULT NULL,                     
                          `menu` VARCHAR(255) DEFAULT NULL,                      
                          `unit_of_measurement` VARCHAR(255) DEFAULT NULL,       
                          `mrp` VARCHAR(255) DEFAULT NULL,                       
                          `offer_price` VARCHAR(255) DEFAULT NULL,               
                          `vat` VARCHAR(255) DEFAULT NULL,                       
                          `purchase_cost` VARCHAR(255) DEFAULT NULL,             
                          `barcode` VARCHAR(255) DEFAULT NULL,                   
                          `group_id` VARCHAR(255) DEFAULT NULL,                  
                          `gender_attr` VARCHAR(255) DEFAULT NULL,               
                          `long_description` VARCHAR(255) DEFAULT NULL,          
                          `main_image` VARCHAR(255) DEFAULT NULL,                
                          `image1` VARCHAR(255) DEFAULT NULL,                    
                          `image2` VARCHAR(255) DEFAULT NULL,                    
                          `image3` VARCHAR(255) DEFAULT NULL,                    
                          `image4` VARCHAR(255) DEFAULT NULL,                    
                          `image5` VARCHAR(255) DEFAULT NULL,                    
                          `color` VARCHAR(255) DEFAULT NULL,                     
                          `size` VARCHAR(255) DEFAULT NULL,                      
                          `attr1` VARCHAR(255) DEFAULT NULL,                     
                          `attr2` VARCHAR(255) DEFAULT NULL,                     
                          `spec1` VARCHAR(255) DEFAULT NULL,                     
                          `spec2` VARCHAR(255) DEFAULT NULL,                     
                          `spec3` VARCHAR(255) DEFAULT NULL,                     
                          `spec4` VARCHAR(255) DEFAULT NULL,                     
                          `spec5` VARCHAR(255) DEFAULT NULL,                     
                          `spec6` VARCHAR(255) DEFAULT NULL,                     
                          `spec7` VARCHAR(255) DEFAULT NULL,                     
                          `spec8` VARCHAR(255) DEFAULT NULL,                     
                          `spec9` VARCHAR(255) DEFAULT NULL,                     
                          `spec10` VARCHAR(255) DEFAULT NULL,                    
                          `spec11` VARCHAR(255) DEFAULT NULL,                    
                          `spec12` VARCHAR(255) DEFAULT NULL,                    
                          `spec13` VARCHAR(255) DEFAULT NULL,                    
                          `spec14` VARCHAR(255) DEFAULT NULL,                    
                          `spec15` VARCHAR(255) DEFAULT NULL,                    
                          `spec16` VARCHAR(255) DEFAULT NULL,                    
                          `spec17` VARCHAR(255) DEFAULT NULL,                    
                          `spec18` VARCHAR(255) DEFAULT NULL,                    
                          `spec19` VARCHAR(255) DEFAULT NULL,                    
                          `spec20` VARCHAR(255) DEFAULT NULL,                    
                          `spec21` VARCHAR(255) DEFAULT NULL,                    
                          `spec22` VARCHAR(255) DEFAULT NULL,                    
                          `spec23` VARCHAR(255) DEFAULT NULL,                    
                          `spec24` VARCHAR(255) DEFAULT NULL,                    
                          `spec25` VARCHAR(255) DEFAULT NULL,                    
                          `url` VARCHAR(255) DEFAULT NULL,                       
                          PRIMARY KEY (`id`)                                     
                        ) ;
ALTER TABLE `t_vendor_product_import_log` CHANGE `group_id` `group_id` VARCHAR (255)  NULL 
ALTER TABLE `m_vendor_api_info` ADD COLUMN `default_brand` VARCHAR (255)  NULL  AFTER `vendor_id`, ADD COLUMN `default_menu` VARCHAR (255)  NULL  AFTER `default_brand`;                        
#==============================================================
# Apr_25_2014
ALTER TABLE `king_transactions` ADD COLUMN `pnh_member_fee` DOUBLE DEFAULT 0 NULL AFTER `order_for`;
#======================================================
##Apr_25_4_2014
#Update Member fee column in transacctions table
UPDATE king_transactions tr 
JOIN pnh_member_offers mo ON mo.transid_ref = tr.transid
SET tr.pnh_member_fee = 50
WHERE tr.order_for != 2
#================================================
##Apr_28_2014
ALTER TABLE t_stock_info ADD COLUMN expiry_on DATE AFTER mrp,ADD COLUMN offer_note DATE AFTER expiry_on;
ALTER TABLE m_product_info ADD COLUMN self_life INT DEFAULT NULL AFTER product_cat_id; 
#============================================
#May_01_2014
ALTER TABLE `pnh_member_offers` ADD COLUMN `mob_serv_provider` VARCHAR (50)  NULL  AFTER `remarks`;
#============================================
# May_04_2014
ALTER TABLE m_rack_bin_info ADD COLUMN is_damaged TINYINT(1) DEFAULT 0 AFTER bin_name;
#===============================================
# May_05_2014
ALTER TABLE m_storage_location_info DROP COLUMN is_damaged;
#===============================================
#May_06_2014
ALTER TABLE `pnh_member_offers` DROP COLUMN `mob_serv_provider`;
ALTER TABLE `pnh_member_info` ADD COLUMN `mobile_network` VARCHAR(100) NULL AFTER `mobile`; 
#==========================

ALTER TABLE t_vendor_po_order_link ADD COLUMN order_status TINYINT(1) DEFAULT 0 AFTER order_qty; 
ALTER TABLE m_vendor_product_link ADD COLUMN `ven_stock_qty` INT(5) DEFAULT '0' AFTER is_active;

CREATE TABLE `disabled_batch_log` (
  `id` INT(11) NOT NULL AUTO_INCREMENT,
  `transid` VARCHAR(255) DEFAULT NULL,
  `remarks` TINYTEXT,
  `status` TINYINT(11) NOT NULL DEFAULT '1',
  `created_on` DATETIME DEFAULT NULL,
  `created_by` INT(11) DEFAULT NULL,
  `modified_on` DATETIME DEFAULT NULL,
  `modified_by` INT(11) DEFAULT NULL,
  PRIMARY KEY (`id`)
); 
#========================================================================
#May_12_2014
ALTER TABLE `pnh_member_offers` ADD COLUMN `details_updated` TINYINT(11) DEFAULT 0 NULL AFTER `delivery_status`; 
#==========================================================================================================
#Update details_updated for insurance offers
UPDATE pnh_member_offers mo
JOIN pnh_member_info minfo ON minfo.pnh_member_id = mo.member_id
JOIN pnh_member_insurance mi ON mi.sno = mo.insurance_id
 SET details_updated = 1
WHERE mo.offer_type IN (0,2) AND minfo.mobile!='' AND mi.proof_id!='' AND mi.proof_type!='' AND mi.proof_address!='' AND mi.first_name!='' AND mi.mob_no!='' AND mi.mem_receipt_no!='' AND UNIX_TIMESTAMP(mi.mem_receipt_date)!='' AND mi.mem_receipt_amount!='';
#==========================================================================================================
#Update details_updated for recharge offers
UPDATE pnh_member_offers mo 
JOIN pnh_member_info minfo ON minfo.pnh_member_id = mo.member_id
SET details_updated = 1
WHERE mo.offer_type=1 AND minfo.mobile_network!='' AND minfo.first_name!='' AND minfo.mobile!='';
#==========================================================================================================
# May_14_2014
ALTER TABLE `king_orders` ADD COLUMN `order_product_id` BIGINT NULL AFTER `lpoints_valid_days`;

#BIG BUCKET ROW
#INSERT INTO `shipment_batch_process` (`num_orders`, `status`, `batch_remarks`,`orders_by`, `created_by`,`created_on`) VALUES ('9999', '2', 'DEFAULT BIG BUCKET - RESERVATION','Developer', '0','2013-10-03 14:42:46');
#=====================================================================================
#May_15_2014
ALTER TABLE king_orders CHANGE order_product_id order_product_id INT(11) DEFAULT 0 ;
ALTER TABLE king_dealitems CHANGE is_group is_group TINYINT(1) DEFAULT 0;
#================================================================================
#May_17_2014
RENAME TABLE `pnh_api_user_auth` TO `pnh_user_auth`;
RENAME TABLE `pnh_api_users` TO `pnh_users`; 
#=============================================================
#May_20_2014
CREATE TABLE `t_vendor_product_import_counts` (  
                                  `id` BIGINT(20) NOT NULL AUTO_INCREMENT,       
                                  `vendor_id` BIGINT(20) DEFAULT NULL,           
                                  `file_name` VARCHAR(255) DEFAULT NULL,         
                                  `total_products` INT(10) DEFAULT NULL,         
                                  `total_deals` INT(10) DEFAULT NULL,            
                                  `total_deals_inserted` INT(10) DEFAULT NULL,   
                                  `total_error_flaged` INT(10) DEFAULT NULL,     
                                  `created_on` DATETIME DEFAULT NULL,            
                                  PRIMARY KEY (`id`)                             
                                );
#===============< REQUEST & complaint TABLE >====================
#May_21_2014
CREATE TABLE `pnh_franchise_requests`( `id` BIGINT NOT NULL AUTO_INCREMENT, `franchise_id` VARCHAR(100), `request_from` VARCHAR(80), `request_desc` TEXT, `status` TINYINT(11), `created_on` DATETIME, PRIMARY KEY (`id`) );
CREATE TABLE `pnh_franchise_complaints`( `id` BIGINT NOT NULL AUTO_INCREMENT, `token_id` VARCHAR(180) COMMENT 'Complaint Reference id', `franchise_id` INT(50), `complaint_from` VARCHAR(80), `complaint_desc` TEXT, `priority` VARCHAR(50), `remarks` VARCHAR(100), `status` TINYINT(11) DEFAULT 1, `created_on` DATETIME, PRIMARY KEY (`id`) );
#===============< REQUEST & complaint TABLE >====================
#May_27_2014
ALTER TABLE `pnh_member_insurance` ADD COLUMN `processed_by` TINYINT(20) NULL AFTER `modified_on`, ADD COLUMN `processed_on` DATETIME NULL AFTER `processed_by`;
# ==========================================
# May_28_2014
ALTER TABLE `pnh_member_insurance_printlog` ADD COLUMN `status` TINYINT(11) DEFAULT 1 NULL AFTER `last_printed_on`; 
# ==========================================
#May_29_2014 - INDEX UPDATES
ALTER TABLE `t_imei_no` ADD INDEX `imei_no` (`imei_no`), ADD INDEX `status` (`status`);
ALTER TABLE `pnh_member_fee` ADD INDEX `indexes` (`member_id`, `transid`, `invoice_no`); 
ALTER TABLE `pnh_member_insurance_printlog` ADD INDEX `indexes` (`insurance_id`, `printed_by`); 
ALTER TABLE `pnh_member_offers` ADD INDEX `Indexes` (`member_id`, `franchise_id`, `offer_type`, `pnh_pid`, `transid_ref`, `insurance_id`, `process_status`); 
ALTER TABLE `pnh_member_offers_log` ADD INDEX `Indexes` (`fid`, `mid`, `offer_type`, `status`); 
ALTER TABLE `pnh_member_offers` DROP INDEX `member_id`, DROP INDEX `franchise_id`, DROP INDEX `transid_ref`, DROP INDEX `order_id`, DROP INDEX `insurance_id`, DROP INDEX `member_id_2`;
ALTER TABLE `pnh_member_insurance` DROP INDEX `fid_2`; 
ALTER TABLE `pnh_member_insurance_menu` DROP INDEX `menu_id_2`; 
ALTER TABLE `pnh_t_receipt_reconcilation` ADD INDEX `Indexes` (`debit_note_id`, `invoice_no`, `dispatch_id`, `inv_amount`, `unreconciled`, `is_invoice_cancelled`);
ALTER TABLE `pnh_t_receipt_reconcilation_log` ADD INDEX `Indexes` (`credit_note_id`, `receipt_id`, `reconcile_id`, `is_invoice_cancelled`, `is_reversed`); 
ALTER TABLE `non_sk_imei_insurance_orders` ADD INDEX (`franchise_id`, `order_id`, `transid`, `userid`, `member_id`, `nonsk_imei_no`, `model_no`, `insurance_id`);
ALTER TABLE `pnh_member_fee` DROP INDEX `indexes`, ADD INDEX (`member_id`), ADD INDEX (`transid`), ADD INDEX (`invoice_no`), ADD INDEX (`status`);
ALTER TABLE `pnh_member_insurance` DROP INDEX `fid`, ADD INDEX (`fid`), ADD INDEX (`mid`), ADD INDEX (`menu_log_id`), ADD INDEX (`offer_type`), ADD INDEX (`proof_id`), ADD INDEX (`opted_insurance`), ADD INDEX (`offer_status`), ADD INDEX (`insurance_margin`), ADD INDEX (`itemid`), ADD INDEX (`order_id`), ADD INDEX (`mob_no`);
ALTER TABLE `pnh_member_insurance_menu` DROP INDEX `menu_id`, ADD INDEX (`menu_id`), ADD INDEX (`greater_than`), ADD INDEX (`less_than`), ADD INDEX (`insurance_margin`), ADD INDEX (`is_active`);
ALTER TABLE `pnh_member_insurance_printlog` DROP INDEX `indexes`, ADD INDEX (`insurance_id`), ADD INDEX (`printcount`), ADD INDEX (`printed_by`);
ALTER TABLE `pnh_member_offers` DROP INDEX `Indexes`, ADD INDEX (`member_id`), ADD INDEX (`franchise_id`), ADD INDEX (`offer_type`), ADD INDEX (`mem_fee_applicable`), ADD INDEX (`pnh_member_fee`), ADD INDEX (`pnh_pid`), ADD INDEX (`order_id`), ADD INDEX (`transid_ref`), ADD INDEX (`insurance_id`), ADD INDEX (`process_status`), ADD INDEX (`feedback_status`), ADD INDEX (`delivery_status`), ADD INDEX (`details_updated`); 
ALTER TABLE `pnh_member_offers_log` DROP INDEX `Indexes`, ADD INDEX (`fid`), ADD INDEX (`mid`), ADD INDEX (`offer_type`), ADD INDEX (`status`); 
ALTER TABLE `pnh_t_receipt_reconcilation` DROP INDEX `Indexes`, ADD INDEX (`debit_note_id`), ADD INDEX (`invoice_no`), ADD INDEX (`dispatch_id`), ADD INDEX (`inv_amount`), ADD INDEX (`unreconciled`), ADD INDEX (`is_invoice_cancelled`);
ALTER TABLE `pnh_t_receipt_reconcilation_log` DROP INDEX `Indexes`, ADD INDEX (`credit_note_id`), ADD INDEX (`receipt_id`), ADD INDEX (`reconcile_id`), ADD INDEX (`is_invoice_cancelled`), ADD INDEX (`is_reversed`);
ALTER TABLE `non_sk_imei_insurance_orders` DROP INDEX `franchise_id`, ADD INDEX (`franchise_id`), ADD INDEX (`order_id`), ADD INDEX (`transid`), ADD INDEX (`userid`), ADD INDEX (`member_id`), ADD INDEX (`nonsk_imei_no`), ADD INDEX (`model_no`), ADD INDEX (`insurance_id`);
# =========================================
#May_29_2014 - table removed
DROP TABLE `nonskimei_mem_fee_insu_amt`;
# =========================================
 # May_30_2014
ALTER TABLE `pnh_member_offers_log` ADD COLUMN `offer_sno` BIGINT(20) NULL COMMENT 'manage offers sno' AFTER `sno`;
#==========================================
#May_28_2014
ALTER TABLE `m_vendor_product_link` ADD COLUMN `vendor_group_no` INT (11)  NULL  AFTER `vendor_id`;
#================================================================================
#Jun_05_2014
CREATE TABLE `m_employee_dept_link`( `id` BIGINT(20) UNSIGNED NOT NULL AUTO_INCREMENT, `employee_id` INT(150), `dept_id` INT(150), `is_active` TINYINT(11), `created_on` DATETIME, `created_by` INT(50), `modified_on` DATETIME, `modified_by` INT(50), PRIMARY KEY (`id`) );
CREATE TABLE `m_departments`( `id` BIGINT(20) UNSIGNED NOT NULL AUTO_INCREMENT, `name` VARCHAR(150), `keyword` VARCHAR(100), `created_on` DATETIME, `created_by` INT(50), `modified_on` DATETIME, `modified_by` INT(50), `status` TINYINT(11), PRIMARY KEY (`id`) );

INSERT INTO `m_departments` (`name`, `keyword`, `created_on`, `created_by`,`status`) VALUES ('Customer Support', 'CUSP', '2014-06-05 13:21:48', '1', '1'); 
INSERT INTO `m_departments` (`name`, `keyword`, `created_on`, `created_by`,`status`) VALUES ('Account and Finance', 'AF', '2014-06-05 13:22:16', '1', '1'); 
INSERT INTO `m_departments` (`name`, `keyword`, `created_on`, `created_by`,`status`) VALUES ('Sourcing', 'SRC', '2014-06-05 13:24:58', '1', '1'); 
INSERT INTO `m_departments` (`name`, `keyword`, `created_on`, `created_by`,`status`) VALUES ('Logistics', 'LOG', '2014-06-05 13:21:48', '1', '1');

ALTER TABLE `m_employee_roles` ADD COLUMN `status` TINYINT(11) DEFAULT 1 NULL AFTER `created_by`;
INSERT INTO `m_employee_roles` (`role_name`, `short_frm`, `created_on`, `created_by`,`status`) VALUES ('Office Emplolyee', 'OFFICE_EMP', '2014-06-03 18:47:03', '54', '0');
ALTER TABLE `m_employee_info` ADD COLUMN `emp_type` TINYINT(11) DEFAULT 2 NULL COMMENT '1:field emp,2:office emp' AFTER `remarks`;
#================================================================================
#Jun_06_2014
ALTER TABLE `pnh_franchise_requests` CHANGE `request_from` `from` VARCHAR(80) CHARSET latin1 COLLATE latin1_swedish_ci DEFAULT 'app' NULL, ADD COLUMN `type` VARCHAR(50) NULL AFTER `from`, CHANGE `request_desc` `title` VARCHAR(150) CHARSET latin1 COLLATE latin1_swedish_ci NULL, CHANGE `status` `desc` TEXT NULL, CHANGE `created_on` `status` TINYINT(11) DEFAULT 1 NULL COMMENT '1:pending,2:done,3:cancelled', ADD COLUMN `created_on` DATETIME NULL AFTER `status`, ADD COLUMN `modified_on` DATETIME NULL AFTER `created_on`, ADD COLUMN `modified_by` INT(20) NULL AFTER `modified_on`;
#================================================================================
#May_28_2014
ALTER TABLE `m_vendor_product_link` ADD COLUMN `vendor_group_no` INT (11)  NULL  AFTER `vendor_id`;
#================================================================================
#june_9_2014
CREATE TABLE `m_vendor_api_datalog` (                     
                        `id` BIGINT(20) NOT NULL AUTO_INCREMENT,                
                        `batch_id` INT(11) DEFAULT '0',                         
                        `vendor_id` INT(11) DEFAULT '0',                        
                        `resource_id` INT(11) DEFAULT '0',                      
                        `product_name` VARCHAR(255) DEFAULT NULL,               
                        `sku_code` VARCHAR(255) DEFAULT NULL,                   
                        `product_code` VARCHAR(255) DEFAULT NULL,               
                        `model_code` VARCHAR(255) DEFAULT NULL,                 
                        `qty` VARCHAR(255) DEFAULT NULL,                        
                        `short_description` VARCHAR(255) DEFAULT NULL,          
                        `category` VARCHAR(255) DEFAULT NULL,                   
                        `category1` VARCHAR(255) DEFAULT NULL,                  
                        `category2` VARCHAR(255) DEFAULT NULL,                  
                        `category3` VARCHAR(255) DEFAULT NULL,                  
                        `category4` VARCHAR(255) DEFAULT NULL,                  
                        `brand` VARCHAR(255) DEFAULT NULL,                      
                        `menu` VARCHAR(255) DEFAULT NULL,                       
                        `unit_of_measurement` VARCHAR(255) DEFAULT NULL,        
                        `mrp` VARCHAR(255) DEFAULT NULL,                        
                        `offer_price` VARCHAR(255) DEFAULT NULL,                
                        `vat` VARCHAR(255) DEFAULT NULL,                        
                        `purchase_cost` VARCHAR(255) DEFAULT NULL,              
                        `barcode` VARCHAR(255) DEFAULT NULL,                    
                        `group_id` VARCHAR(255) DEFAULT NULL,                   
                        `gender_attr` VARCHAR(255) DEFAULT NULL,                
                        `long_description` VARCHAR(255) DEFAULT NULL,           
                        `main_image` VARCHAR(255) DEFAULT NULL,                 
                        `image1` VARCHAR(255) DEFAULT NULL,                     
                        `image2` VARCHAR(255) DEFAULT NULL,                     
                        `image3` VARCHAR(255) DEFAULT NULL,                     
                        `image4` VARCHAR(255) DEFAULT NULL,                     
                        `image5` VARCHAR(255) DEFAULT NULL,                     
                        `color` VARCHAR(255) DEFAULT NULL,                      
                        `size` VARCHAR(255) DEFAULT NULL,                       
                        `attr1` VARCHAR(255) DEFAULT NULL,                      
                        `attr2` VARCHAR(255) DEFAULT NULL,                      
                        `spec1` VARCHAR(255) DEFAULT NULL,                      
                        `spec2` VARCHAR(255) DEFAULT NULL,                      
                        `spec3` VARCHAR(255) DEFAULT NULL,                      
                        `spec4` VARCHAR(255) DEFAULT NULL,                      
                        `spec5` VARCHAR(255) DEFAULT NULL,                      
                        `spec6` VARCHAR(255) DEFAULT NULL,                      
                        `spec7` VARCHAR(255) DEFAULT NULL,                      
                        `spec8` VARCHAR(255) DEFAULT NULL,                      
                        `spec9` VARCHAR(255) DEFAULT NULL,                      
                        `spec10` VARCHAR(255) DEFAULT NULL,                     
                        `spec11` VARCHAR(255) DEFAULT NULL,                     
                        `spec12` VARCHAR(255) DEFAULT NULL,                     
                        `spec13` VARCHAR(255) DEFAULT NULL,                     
                        `spec14` VARCHAR(255) DEFAULT NULL,                     
                        `spec15` VARCHAR(255) DEFAULT NULL,                     
                        `spec16` VARCHAR(255) DEFAULT NULL,                     
                        `spec17` VARCHAR(255) DEFAULT NULL,                     
                        `spec18` VARCHAR(255) DEFAULT NULL,                     
                        `spec19` VARCHAR(255) DEFAULT NULL,                     
                        `spec20` VARCHAR(255) DEFAULT NULL,                     
                        `spec21` VARCHAR(255) DEFAULT NULL,                     
                        `spec22` VARCHAR(255) DEFAULT NULL,                     
                        `spec23` VARCHAR(255) DEFAULT NULL,                     
                        `spec24` VARCHAR(255) DEFAULT NULL,                     
                        `spec25` VARCHAR(255) DEFAULT NULL,                     
                        `url` VARCHAR(255) DEFAULT NULL,                        
                        `expected_dod` VARCHAR(255) DEFAULT NULL,               
                        `import_filename` VARCHAR(255) DEFAULT NULL,            
                        `imported_on` DATETIME DEFAULT NULL,                    
                        `import_status` INT(1) DEFAULT '0',                     
                        `created_on` DATETIME DEFAULT NULL,                     
                        `modified_on` DATETIME DEFAULT NULL,                    
                        PRIMARY KEY (`id`)                                      
                      );
#================================================================================
#Jun_09_2014
INSERT INTO `m_departments` (`name`, `keyword`,`created_on`,`created_by`, `status` ) VALUES ('Techical', 'TECH','2014-06-09 17:12:32' ,'1' ,'1');
#RENAME TABLE `m_dept_ request_types` TO `m_dept_request_types`;
CREATE TABLE `m_dept_request_types`( `id` INT(250) UNSIGNED NOT NULL AUTO_INCREMENT, `name` VARCHAR(200), PRIMARY KEY (`id`) );
INSERT INTO `m_dept_request_types` (`name`) VALUES ('Product'); 
INSERT INTO `m_dept_request_types` (`name`) VALUES ('Payment'); 
INSERT INTO `m_dept_request_types` (`name`) VALUES ('Service');
INSERT INTO `m_dept_request_types` (`name`) VALUES ('Insurance');
INSERT INTO `m_dept_request_types` (`name`) VALUES ('Shipment');
INSERT INTO `m_dept_request_types` (`name`) VALUES ('Technical');
CREATE TABLE `m_dept_request_type_link`( `id` BIGINT NOT NULL AUTO_INCREMENT, `dept_id` BIGINT, `type_id` BIGINT COMMENT 'request_type table id', `is_active` TINYINT(11) DEFAULT 1, `created_on` DATETIME, `created_by` INT(80), `modified_on` DATETIME, `modified_by` INT(80), PRIMARY KEY (`id`) );

INSERT INTO `m_dept_request_type_link` (`dept_id`, `type_id`, `created_on`, `created_by`) VALUES ('1', '1', '2014-06-09 19:27:30', '1'); 
INSERT INTO `m_dept_request_type_link` (`dept_id`, `type_id`, `created_on`, `created_by`) VALUES ('2', '2', '2014-06-09 19:27:51', '1'); 
INSERT INTO `m_dept_request_type_link` (`dept_id`, `type_id`, `created_on`, `created_by`) VALUES ('3', '3', '2014-06-09 19:28:06', '1'); 
INSERT INTO `m_dept_request_type_link` (`dept_id`, `type_id`, `created_on`, `created_by`) VALUES ('4', '4', '2014-06-09 19:28:29', '1'); 
INSERT INTO `m_dept_request_type_link` (`dept_id`, `type_id`, `created_on`, `created_by`) VALUES ('5', '5', '2014-06-09 19:28:45', '1');
INSERT INTO `m_dept_request_type_link` (`dept_id`, `type_id`, `created_on`, `created_by`) VALUES ('4', '5', '2014-06-09 19:31:32', '1');
#Jun_10_2014
ALTER TABLE `support_tickets` ADD COLUMN `franchise_id` BIGINT NULL AFTER `updated_on`, ADD COLUMN `related_to` INT(100) NULL AFTER `franchise_id`; 
#====================================================================
#Jun_11_2014
CREATE TABLE `pnh_t_returns_transit_log` (
`id` BIGINT(11) NOT NULL AUTO_INCREMENT,
`order_id` BIGINT(15) DEFAULT NULL,
`return_id` BIGINT(11) DEFAULT NULL,
`ticket_id` BIGINT(11) DEFAULT NULL,
`transit_mode` TINYINT(1) DEFAULT '0',
`courier` VARCHAR(255) DEFAULT NULL,
`awb` VARCHAR(255) DEFAULT NULL,
`emp_phno` INT(11) DEFAULT '0',
`emp` INT(255) DEFAULT NULL,
`status` TINYINT(1) DEFAULT '0',
`logged_on` BIGINT(25) DEFAULT NULL,
`logged_by` TINYINT(1) DEFAULT NULL,
`returned_on` BIGINT(25) DEFAULT NULL,
`returned_by` TINYINT(1) DEFAULT '0',
PRIMARY KEY (`id`)
);

ALTER TABLE `pnh_t_returns_transit_log` CHANGE `emp_phno` `emp_phno` INT(11) DEFAULT 0 NULL; 

ALTER TABLE `pnh_invoice_returns` ADD COLUMN `transit_type` TINYINT(1) DEFAULT 0 NOT NULL AFTER `returned_on`; 

ALTER TABLE `pnh_t_returns_transit_log` CHANGE `courier_id` `courier` VARCHAR(255) NULL; 

ALTER TABLE `pnh_t_receipt_info` ADD COLUMN `courier_name` VARCHAR(255) NULL AFTER `unreconciled_status`, ADD COLUMN `awb` VARCHAR(255) NULL AFTER `courier_name`, ADD COLUMN `emp_name` VARCHAR(255) NULL AFTER `awb`, ADD COLUMN `contact_no` INT(11) NULL AFTER `emp_name`; 
#====================================================================
#Jun_12_2014
ALTER TABLE `pnh_member_insurance` ADD INDEX (`status_ship`);
#====================================================================

#===============MEMBER PRICE DB CHANGES==========================================
#Jun_13_2014
ALTER TABLE `pnh_m_franchise_info` ADD COLUMN `price_type` TINYINT(1) DEFAULT 0 NULL AFTER `new_credit_limit`; 
ALTER TABLE `king_orders` ADD COLUMN `member_price` DOUBLE DEFAULT 0 NULL AFTER `redeem_value`, ADD COLUMN `is_memberprice` TINYINT(1) DEFAULT 0 NULL AFTER `partner_order_id`; 
ALTER TABLE `king_dealitems` ADD COLUMN `member_price` INT(10) UNSIGNED DEFAULT 0 NOT NULL AFTER `price`; 
CREATE TABLE `franchise_pricetype_log`( `id` INT(11) NOT NULL AUTO_INCREMENT, `franchise_id` BIGINT(11), `price_type` TINYINT(1), `modified_on` BIGINT(25), `modified_by` INT(11), PRIMARY KEY (`id`) ); 
ALTER TABLE `franchise_pricetype_log` ADD COLUMN `reason` VARCHAR(255) NULL AFTER `price_type`; 
ALTER TABLE `pnh_sch_discount_brands` ADD COLUMN `price_type` TINYINT(1) DEFAULT 0 NOT NULL AFTER `is_sch_enabled`; 
#====================================================================
#Jun_14_2014
ALTER TABLE `king_orders` ADD COLUMN `other_price` DOUBLE DEFAULT 0 NULL AFTER `member_price`;
#===============MEMBER PRICE DB CHANGES==========================================
#Jun_17_2014
ALTER TABLE `deal_price_changelog` ADD COLUMN `old_member_price` DECIMAL(10,2) NULL AFTER `old_price`, ADD COLUMN `new_member_price` DECIMAL(10,2) NULL AFTER `old_member_price`;
ALTER TABLE `king_dealitems` CHANGE `member_price` `member_price` DECIMAL(10,2) UNSIGNED DEFAULT 0 NOT NULL, ADD COLUMN `mp_max_qty` INT(10) NULL AFTER `member_price`, ADD COLUMN `mp_max_order_qty` INT(10) DEFAULT 0 NULL AFTER `mp_max_qty`;
CREATE TABLE `deal_member_price_changelog` (
  `id` BIGINT(20) UNSIGNED NOT NULL AUTO_INCREMENT,
  `itemid` BIGINT(20) UNSIGNED NOT NULL,
  `old_member_price` DECIMAL(10,2) DEFAULT NULL,
  `new_member_price` DECIMAL(10,2) DEFAULT NULL,
  `new_mp_max_qty`INT(10) UNSIGNED NOT NULL,
  `old_mp_max_qty`INT(10) UNSIGNED NOT NULL,
  `new_mp_max_order_qty` INT(10) UNSIGNED NOT NULL,
  `old_mp_max_order_qty`INT(10) UNSIGNED NOT NULL,
  `created_by` INT(10) UNSIGNED NOT NULL,
  `created_on` DATETIME DEFAULT NULL,
  `is_active` TINYINT(1) NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  KEY `itemid` (`itemid`)
);
#=============================== 
CREATE TABLE `pnh_t_returns_transit_log` (
  `id` BIGINT(11) NOT NULL AUTO_INCREMENT,
  `order_id` BIGINT(15) DEFAULT NULL,
  `return_id` BIGINT(11) DEFAULT NULL,
  `ticket_id` BIGINT(11) DEFAULT NULL,
  `transit_mode` TINYINT(1) DEFAULT '0',
  `courier` VARCHAR(255) DEFAULT NULL,
  `awb` VARCHAR(255) DEFAULT NULL,
  `emp_phno` INT(11) DEFAULT '0',
  `emp` INT(255) DEFAULT NULL,
  `status` TINYINT(1) DEFAULT '0',
  `logged_on` BIGINT(25) DEFAULT NULL,
  `logged_by` TINYINT(1) DEFAULT NULL,
  `returned_on` BIGINT(25) DEFAULT NULL,
  `returned_by` TINYINT(1) DEFAULT '0',
  PRIMARY KEY (`id`)
);

#===============================================
ALTER TABLE `m_vendor_api_templates` ADD COLUMN `attr3` VARCHAR (255)  NULL  AFTER `attr2`, ADD COLUMN `attr4` VARCHAR (255)  NULL  AFTER `attr3`, ADD COLUMN `attr5` VARCHAR (255)  NULL  AFTER `attr4`, ADD COLUMN `attr6` VARCHAR (255)  NULL  AFTER `attr5`, ADD COLUMN `attr7` VARCHAR (255)  NULL  AFTER `attr6`, ADD COLUMN `attr8` VARCHAR (255)  NULL  AFTER `attr7`,CHANGE `purchase_cost` `purchase_cost` VARCHAR (255)  NULL  COLLATE latin1_swedish_ci; 
ALTER TABLE `m_vendor_api_datalog` ADD COLUMN `attr3` VARCHAR (255)  NULL  AFTER `attr2`, ADD COLUMN `attr4` VARCHAR (255)  NULL  AFTER `attr3`, ADD COLUMN `attr5` VARCHAR (255)  NULL  AFTER `attr4`, ADD COLUMN `attr6` VARCHAR (255)  NULL  AFTER `attr5`, ADD COLUMN `attr7` VARCHAR (255)  NULL  AFTER `attr6`, ADD COLUMN `attr8` VARCHAR (255)  NULL  AFTER `attr7`,CHANGE `purchase_cost` `purchase_cost` VARCHAR (255)  NULL  COLLATE latin1_swedish_ci;

CREATE TABLE `m_vendor_attributes_link` (                                                   
                            `id` BIGINT(20) NOT NULL AUTO_INCREMENT,                                                  
                            `vendor_id` INT(11) DEFAULT NULL,                                                         
                            `attr` VARCHAR(255) DEFAULT NULL COMMENT 'vendor template link table attributes names ',  
                            `attr_id` INT(11) DEFAULT NULL COMMENT 'master attribute table attrbute ids',             
                            `created_on` DATETIME DEFAULT NULL,                                                       
                            `created_by` INT(11) DEFAULT NULL,                                                        
                            PRIMARY KEY (`id`)                                                                        
                          );
#=============================================================
#Jun_23_2014
ALTER TABLE `deal_member_price_changelog` ADD COLUMN `mp_is_offer` TINYINT(11) DEFAULT 0 NULL AFTER `old_mp_max_order_qty`, ADD COLUMN `mp_offer_from` DATETIME NULL AFTER `mp_is_offer`, ADD COLUMN `mp_offer_to` DATETIME NULL AFTER `mp_offer_from`; 
ALTER TABLE `king_dealitems` ADD COLUMN `mp_is_offer` TINYINT(11) NULL AFTER `mp_max_order_qty`, ADD COLUMN `mp_offer_from` DATETIME NULL AFTER `mp_is_offer`, ADD COLUMN `mp_offer_to` DATETIME NULL AFTER `mp_offer_from`; 
# API changes-Franchise/API admin user created
INSERT INTO `king_admin` (`user_id`, `name`, `username`, `password`, `usertype`, `access`, `brandid`, `fullname`, `email`, `createdon`, `modifiedon`) VALUES ('0ec7bd10ef5d2c99e7121241f8f12d1f', 'Franchise/API', 'franchise', 'dc21afd02d0c2edb2bee3ead8da23e1f', '1', '0', '0', '', 'franchise@storeking.in', '2014-06-23 18:19:21', '2014-06-23 18:19:23'); 
#=============================================================

#jun_24 2014
#=============================== 
ALTER TABLE `shipment_batch_process_invoice_link` CHANGE `is_delivered` `is_delivered` INT (11)  NOT NULL;

ALTER TABLE `m_employee_roles` CHANGE `status` `emp_role_status` TINYINT(11) DEFAULT 1 NULL;
#===========================================
# Jun_25_2014
ALTER TABLE `king_dealitems` ADD COLUMN `mp_offer_note` TEXT NULL AFTER `mp_offer_to`;
ALTER TABLE `deal_member_price_changelog` ADD COLUMN `mp_offer_note` TEXT NULL AFTER `mp_offer_to`;
ALTER TABLE `deal_member_price_changelog` CHANGE `is_active` `is_active` TINYINT(1) DEFAULT 1 NOT NULL AFTER `mp_offer_note`, ADD COLUMN `modified_on` DATETIME NULL AFTER `created_on`, ADD COLUMN `modified_by` INT(10) NULL AFTER `modified_on`;
# Jun_26_2014
ALTER TABLE `deal_member_price_changelog` CHANGE `new_mp_max_qty` `new_mp_max_qty` INT(10) UNSIGNED DEFAULT 0 NOT NULL, CHANGE `old_mp_max_qty` `old_mp_max_qty` INT(10) UNSIGNED DEFAULT 0 NOT NULL, CHANGE `new_mp_max_order_qty` `new_mp_max_order_qty` INT(10) UNSIGNED DEFAULT 0 NOT NULL, CHANGE `old_mp_max_order_qty` `old_mp_max_order_qty` INT(10) UNSIGNED DEFAULT 0 NOT NULL;
#===========================================
#Jun_26_2014
ALTER TABLE `king_dealitems` CHANGE `mp_max_qty` `mp_frn_max_qty` INT(10) DEFAULT 0 NULL, CHANGE `mp_max_order_qty` `mp_mem_max_qty` INT(10) DEFAULT 0 NULL;
ALTER TABLE `deal_member_price_changelog` CHANGE `new_mp_max_qty` `new_mp_frn_max_qty` INT(10) UNSIGNED DEFAULT 0 NOT NULL, CHANGE `old_mp_max_qty` `old_mp_frn_max_qty` INT(10) UNSIGNED DEFAULT 0 NOT NULL, CHANGE `new_mp_max_order_qty` `new_mp_mem_max_qty` INT(10) UNSIGNED DEFAULT 0 NOT NULL, CHANGE `old_mp_max_order_qty` `old_mp_mem_max_qty` INT(10) UNSIGNED DEFAULT 0 NOT NULL;
ALTER TABLE `king_dealitems` CHANGE `mp_frn_max_qty` `mp_frn_max_qty` INT(10) DEFAULT 0 NOT NULL;
#===========================================

#===============================================
ALTER TABLE `m_client_category_link` ADD COLUMN `main_category` VARCHAR (255)  NULL  AFTER `client_category`;
ALTER TABLE `m_vendor_api_templates` ADD COLUMN `spec26` VARCHAR (255)  NULL  AFTER `spec25`, ADD COLUMN `spec27` VARCHAR (255)  NULL  AFTER `spec26`, ADD COLUMN `spec28` VARCHAR (255)  NULL  AFTER `spec27`, ADD COLUMN `spec29` VARCHAR (255)  NULL  AFTER `spec28`, ADD COLUMN `spec30` VARCHAR (255)  NULL  AFTER `spec29`, ADD COLUMN `spec31` VARCHAR (255)  NULL  AFTER `spec30`, ADD COLUMN `spec32` VARCHAR (255)  NULL  AFTER `spec31`, ADD COLUMN `spec33` VARCHAR (255)  NULL  AFTER `spec32`, ADD COLUMN `spec34` VARCHAR (255)  NULL  AFTER `spec33`, ADD COLUMN `spec35` VARCHAR (255)  NULL  AFTER `spec34`, ADD COLUMN `spec36` VARCHAR (255)  NULL  AFTER `spec35`, ADD COLUMN `spec37` VARCHAR (255)  NULL  AFTER `spec36`, ADD COLUMN `spec38` VARCHAR (255)  NULL  AFTER `spec37`, ADD COLUMN `spec39` VARCHAR (255)  NULL  AFTER `spec38`, ADD COLUMN `spec40` VARCHAR (255)  NULL  AFTER `spec39`, ADD COLUMN `spec41` VARCHAR (255)  NULL  AFTER `spec40`, ADD COLUMN `spec42` VARCHAR (255)  NULL  AFTER `spec41`, ADD COLUMN `spec43` VARCHAR (255)  NULL  AFTER `spec42`, ADD COLUMN `spec44` VARCHAR (255)  NULL  AFTER `spec43`, ADD COLUMN `spec45` VARCHAR (255)  NULL  AFTER `spec44`, ADD COLUMN `spec46` VARCHAR (255)  NULL  AFTER `spec45`, ADD COLUMN `spec47` VARCHAR (255)  NULL  AFTER `spec46`, ADD COLUMN `spec48` VARCHAR (255)  NULL  AFTER `spec47`, ADD COLUMN `spec49` VARCHAR (255)  NULL  AFTER `spec48`, ADD COLUMN `spec50` VARCHAR (255)  NULL  AFTER `spec49`, ADD COLUMN `spec51` VARCHAR (255)  NULL  AFTER `spec50`, ADD COLUMN `spec52` VARCHAR (255)  NULL  AFTER `spec51`, ADD COLUMN `spec53` VARCHAR (255)  NULL  AFTER `spec52`, ADD COLUMN `spec54` VARCHAR (255)  NULL  AFTER `spec53`, ADD COLUMN `spec55` VARCHAR (255)  NULL  AFTER `spec54`, ADD COLUMN `spec56` VARCHAR (255)  NULL  AFTER `spec55`, ADD COLUMN `spec57` VARCHAR (255)  NULL  AFTER `spec56`, ADD COLUMN `spec58` VARCHAR (255)  NULL  AFTER `spec57`, ADD COLUMN `spec59` VARCHAR (255)  NULL  AFTER `spec58`, ADD COLUMN `spec60` VARCHAR (255)  NULL  AFTER `spec59`,CHANGE `spec25` `spec25` VARCHAR (255)  NULL  COLLATE latin1_swedish_ci;
ALTER TABLE `m_vendor_api_datalog` ADD COLUMN `spec26` VARCHAR (255)  NULL  AFTER `spec25`, ADD COLUMN `spec27` VARCHAR (255)  NULL  AFTER `spec26`, ADD COLUMN `spec28` VARCHAR (255)  NULL  AFTER `spec27`, ADD COLUMN `spec29` VARCHAR (255)  NULL  AFTER `spec28`, ADD COLUMN `spec30` VARCHAR (255)  NULL  AFTER `spec29`, ADD COLUMN `spec31` VARCHAR (255)  NULL  AFTER `spec30`, ADD COLUMN `spec32` VARCHAR (255)  NULL  AFTER `spec31`, ADD COLUMN `spec33` VARCHAR (255)  NULL  AFTER `spec32`, ADD COLUMN `spec34` VARCHAR (255)  NULL  AFTER `spec33`, ADD COLUMN `spec35` VARCHAR (255)  NULL  AFTER `spec34`, ADD COLUMN `spec36` VARCHAR (255)  NULL  AFTER `spec35`, ADD COLUMN `spec37` VARCHAR (255)  NULL  AFTER `spec36`, ADD COLUMN `spec38` VARCHAR (255)  NULL  AFTER `spec37`, ADD COLUMN `spec39` VARCHAR (255)  NULL  AFTER `spec38`, ADD COLUMN `spec40` VARCHAR (255)  NULL  AFTER `spec39`, ADD COLUMN `spec41` VARCHAR (255)  NULL  AFTER `spec40`, ADD COLUMN `spec42` VARCHAR (255)  NULL  AFTER `spec41`, ADD COLUMN `spec43` VARCHAR (255)  NULL  AFTER `spec42`, ADD COLUMN `spec44` VARCHAR (255)  NULL  AFTER `spec43`, ADD COLUMN `spec45` VARCHAR (255)  NULL  AFTER `spec44`, ADD COLUMN `spec46` VARCHAR (255)  NULL  AFTER `spec45`, ADD COLUMN `spec47` VARCHAR (255)  NULL  AFTER `spec46`, ADD COLUMN `spec48` VARCHAR (255)  NULL  AFTER `spec47`, ADD COLUMN `spec49` VARCHAR (255)  NULL  AFTER `spec48`, ADD COLUMN `spec50` VARCHAR (255)  NULL  AFTER `spec49`, ADD COLUMN `spec51` VARCHAR (255)  NULL  AFTER `spec50`, ADD COLUMN `spec52` VARCHAR (255)  NULL  AFTER `spec51`, ADD COLUMN `spec53` VARCHAR (255)  NULL  AFTER `spec52`, ADD COLUMN `spec54` VARCHAR (255)  NULL  AFTER `spec53`, ADD COLUMN `spec55` VARCHAR (255)  NULL  AFTER `spec54`, ADD COLUMN `spec56` VARCHAR (255)  NULL  AFTER `spec55`, ADD COLUMN `spec57` VARCHAR (255)  NULL  AFTER `spec56`, ADD COLUMN `spec58` VARCHAR (255)  NULL  AFTER `spec57`, ADD COLUMN `spec59` VARCHAR (255)  NULL  AFTER `spec58`, ADD COLUMN `spec60` VARCHAR (255)  NULL  AFTER `spec59`,CHANGE `spec25` `spec25` VARCHAR (255)  NULL  COLLATE latin1_swedish_ci;
ALTER TABLE `m_vendor_product_link` CHANGE `vendor_group_no` `vendor_group_no` VARBINARY (255)  NULL ;                           
#Jun_27_2014
ALTER TABLE `king_orders` ADD COLUMN `mp_logid` BIGINT(11) DEFAULT 0 NULL AFTER `is_memberprice`;
#=========================
ALTER TABLE `pnh_menu_margin_track` ADD COLUMN `default_mp_margin` DOUBLE DEFAULT 0 NULL AFTER `default_margin`; 
#=========================
#Jun_28_2014
ALTER TABLE `support_tickets` ADD COLUMN `req_mem_name` VARCHAR(80) NULL AFTER `related_to`, ADD COLUMN `req_mem_mobile` VARCHAR(50) NULL AFTER `req_mem_name`;
#=========================
#Jun_30_2014
ALTER TABLE `king_dealitems` CHANGE `mp_frn_max_qty` `mp_frn_max_qty` INT(10) DEFAULT 1 NOT NULL, CHANGE `mp_mem_max_qty` `mp_mem_max_qty` INT(10) DEFAULT 1 NULL, ADD COLUMN `mp_max_allow_qty` INT(11) DEFAULT 1 NULL AFTER `mp_mem_max_qty`;
ALTER TABLE `deal_member_price_changelog` CHANGE `new_mp_frn_max_qty` `new_mp_frn_max_qty` INT(10) UNSIGNED DEFAULT 1 NOT NULL, CHANGE `old_mp_frn_max_qty` `old_mp_frn_max_qty` INT(10) UNSIGNED DEFAULT 1 NOT NULL, CHANGE `new_mp_mem_max_qty` `new_mp_mem_max_qty` INT(10) UNSIGNED DEFAULT 1 NOT NULL, CHANGE `old_mp_mem_max_qty` `old_mp_mem_max_qty` INT(10) UNSIGNED DEFAULT 1 NOT NULL, ADD COLUMN `mp_max_allow_qty` INT(10) DEFAULT 1 NULL AFTER `old_mp_mem_max_qty`, ADD COLUMN `mp_offer_shipsin` VARCHAR(50) NULL AFTER `mp_offer_note`;
ALTER TABLE `m_product_info` ADD COLUMN `sync_product_src` TINYINT(1) DEFAULT 0 NULL AFTER `corr_updated_on`;
#=========================
#Jul_02_2014
ALTER TABLE `pnh_menu` ADD COLUMN `default_mp_margin` DOUBLE DEFAULT 0 NULL AFTER `default_margin`; 
#=========================
#Jul_03_2014-shivaraj
ALTER TABLE `king_deals` ADD INDEX (`publish`);
ALTER TABLE `deal_member_price_changelog` ADD INDEX (`mp_max_allow_qty`), ADD INDEX (`mp_is_offer`), ADD INDEX (`mp_offer_from`), ADD INDEX (`mp_offer_to`), ADD INDEX (`mp_offer_shipsin`), ADD INDEX (`is_active`);
ALTER TABLE `king_dealitems` ADD INDEX (`member_price`), ADD INDEX (`mp_frn_max_qty`), ADD INDEX (`mp_mem_max_qty`), ADD INDEX (`mp_max_allow_qty`), ADD INDEX (`mp_is_offer`), ADD INDEX (`mp_offer_from`), ADD INDEX (`mp_offer_to`), ADD INDEX (`price`);

# SET EMPTY member price to offer price
UPDATE king_dealitems SET member_price=price,mp_frn_max_qty=1,mp_mem_max_qty=1,mp_max_allow_qty=10 WHERE member_price = '0.00'; #70958 row(s) affected

# INSERT default log entry in log table
INSERT INTO deal_member_price_changelog (itemid,old_member_price,new_member_price,old_mp_frn_max_qty,new_mp_frn_max_qty,old_mp_mem_max_qty,new_mp_mem_max_qty,mp_max_allow_qty,is_active,created_by,created_on)
	( 
		SELECT mi.id,0,mi.member_price,0,mi.mp_frn_max_qty,0,mi.mp_mem_max_qty,mi.mp_max_allow_qty,1 AS is_active,37 AS created_by,NOW()
		FROM king_dealitems AS mi
		LEFT JOIN deal_member_price_changelog mlog ON mlog.itemid = mi.id
		WHERE mlog.itemid IS NULL #AND mi.id='1268616163'
	);
#=========================
#-===Version update log
CREATE TABLE `m_apk_version_update_log` (
  `id` BIGINT(11) NOT NULL AUTO_INCREMENT,
  `franchise_id` INT(11) DEFAULT NULL,
  `menu_id` BIGINT(11) DEFAULT NULL,
  `cat_id` BIGINT(11) DEFAULT NULL,
  `brand_id` BIGINT(11) DEFAULT NULL,
  `updated_version` VARCHAR(255) DEFAULT NULL,
  `updated_on` DATETIME DEFAULT NULL,
  PRIMARY KEY (`id`)
);

ALTER TABLE king_dealitems ADD COLUMN size_chart TEXT DEFAULT "" AFTER price;
#========================================
#Jul_07_2014
ALTER TABLE `king_dealitems` CHANGE mp_offer_note mp_offer_note VARCHAR(2000) DEFAULT '';
ALTER TABLE `deal_member_price_changelog` CHANGE mp_offer_note mp_offer_note VARCHAR(2000) DEFAULT '';

UPDATE deal_member_price_changelog SET mp_offer_note='' WHERE mp_offer_note IS NULL;
UPDATE king_dealitems SET mp_offer_note='' WHERE mp_offer_note IS NULL;
#========================================
#Jul_09_2014 - mp_logid added to dealitems table, 0:mp not set,num:mp log id
ALTER TABLE `king_dealitems` ADD COLUMN `mp_logid` BIGINT(20) DEFAULT 0 NOT NULL AFTER `mp_offer_note`;#71091 rows
#================================================================
#Jul_12_2014
INSERT INTO `m_dept_request_types` (`id`, `name`) VALUES ('7', 'Sourcing');
INSERT INTO `m_dept_request_type_link` (`dept_id`, `type_id`, `created_on`, `created_by`) VALUES ('3', '7', '2014-07-12 19:27:13', '1');
#======================================
#Track SMS orders
CREATE TABLE `king_user_orders` (
  `sno` BIGINT(20) UNSIGNED NOT NULL AUTO_INCREMENT,
  `id` BIGINT(20) UNSIGNED NOT NULL,
  `transid` CHAR(18) NOT NULL,
  `userid` INT(11) UNSIGNED NOT NULL,
  `itemid` BIGINT(20) UNSIGNED NOT NULL,
  `brandid` BIGINT(20) UNSIGNED NOT NULL,
  `vendorid` BIGINT(20) UNSIGNED NOT NULL,
  `bill_person` VARCHAR(100) NOT NULL,
  `bill_address` TEXT NOT NULL,
  `bill_city` TEXT NOT NULL,
  `bill_pincode` VARCHAR(20) NOT NULL,
  `ship_person` VARCHAR(100) NOT NULL,
  `ship_address` TEXT NOT NULL,
  `ship_city` TEXT NOT NULL,
  `ship_pincode` VARCHAR(20) NOT NULL,
  `bill_phone` VARCHAR(50) NOT NULL,
  `ship_phone` VARCHAR(50) NOT NULL,
  `bill_state` VARCHAR(100) NOT NULL,
  `ship_state` VARCHAR(100) NOT NULL,
  `ship_email` VARCHAR(150) NOT NULL,
  `bill_email` VARCHAR(150) NOT NULL,
  `quantity` INT(10) UNSIGNED NOT NULL,
  `paid` INT(10) UNSIGNED NOT NULL,
  `mode` TINYINT(3) UNSIGNED NOT NULL COMMENT '0 - PG (cc,netbanking), 1 - cod',
  `status` TINYINT(4) NOT NULL DEFAULT '0',
  `admin_order_status` TINYINT(3) DEFAULT '0',
  `shipped` TINYINT(1) NOT NULL,
  `buyer_options` TEXT NOT NULL,
  `time` BIGINT(20) NOT NULL,
  `actiontime` BIGINT(20) UNSIGNED NOT NULL,
  `shiptime` BIGINT(20) UNSIGNED NOT NULL,
  `shipid` VARCHAR(50) NOT NULL,
  `medium` VARCHAR(100) NOT NULL,
  `bpid` BIGINT(20) UNSIGNED NOT NULL,
  `email` VARCHAR(100) NOT NULL,
  `ship_landmark` TEXT NOT NULL,
  `bill_landmark` TEXT NOT NULL,
  `ship_telephone` VARCHAR(50) NOT NULL,
  `ship_country` VARCHAR(255) DEFAULT NULL,
  `bill_country` VARCHAR(255) DEFAULT NULL,
  `bill_telephone` VARCHAR(50) NOT NULL,
  `invoice_no` BIGINT(20) UNSIGNED NOT NULL,
  `priority` TINYINT(1) NOT NULL,
  `priority_note` VARCHAR(200) NOT NULL,
  `note` TEXT NOT NULL,
  `billon_orderprice` TINYINT(1) DEFAULT '0',
  `i_orgprice` DOUBLE DEFAULT '0',
  `i_price` DOUBLE DEFAULT '0',
  `i_nlc` DOUBLE DEFAULT '0',
  `i_phc` DOUBLE DEFAULT '0',
  `i_tax` DOUBLE DEFAULT '0',
  `i_discount` DOUBLE DEFAULT '0',
  `i_coup_discount` DOUBLE DEFAULT '0',
  `member_id` BIGINT(11) DEFAULT '0',
  `loyality_point_value` DOUBLE DEFAULT '0',
  `is_memberprice` TINYINT(1) DEFAULT '0',
  `other_price` DOUBLE DEFAULT '0',
  `mp_logid` BIGINT(11) DEFAULT '0',
  PRIMARY KEY (`sno`),
  KEY `transid` (`transid`),
  KEY `itemid` (`itemid`),
  KEY `userid` (`userid`),
  KEY `id` (`id`),
  KEY `status` (`status`)
);

#==============================================Consolidated payment==============================================================#
ALTER TABLE `pnh_m_franchise_info` ADD COLUMN `is_consolidated_payment` TINYINT(1) DEFAULT 0 NULL AFTER `price_type`;
ALTER TABLE `king_orders` ADD COLUMN `is_consolidated_payment` TINYINT(1) DEFAULT 0 NULL AFTER `mp_logid`; 
ALTER TABLE `t_invoice_credit_notes` ADD COLUMN `payment_id` BIGINT(11) DEFAULT 0 NULL AFTER `ref_id`; 
UPDATE t_invoice_credit_notes SET payment_id=1
CREATE TABLE `pnh_payment_info` (
  `payment_id` BIGINT(11) NOT NULL AUTO_INCREMENT,
  `franchise_id` BIGINT(11) DEFAULT NULL,
  `bank_id` BIGINT(11) DEFAULT NULL,
  `instrument_no` BIGINT(11) DEFAULT NULL,
  `instrument_date` DATE DEFAULT NULL,
  `drawn_inname` VARCHAR(255) DEFAULT NULL,
  `created_by` BIGINT(20) DEFAULT NULL,
  `created_on` DATETIME DEFAULT NULL,
  `cleared_on` DATETIME DEFAULT NULL,
  PRIMARY KEY (`payment_id`)
);
CREATE TABLE `creditnote_payment_linkinfo`( `id` BIGINT(11) NOT NULL AUTO_INCREMENT, `credit_note_id` BIGINT(11), `payment_id` BIGINT(11), `is_active` TINYINT(1) DEFAULT 1, `created_on` DATETIME, `created_by` TINYINT(1), `modified_on` DATETIME, `modified_by` TINYINT(1), PRIMARY KEY (`id`) ); 
CREATE TABLE `pnh_payment_flag_changelog` (
  `id` BIGINT(11) NOT NULL AUTO_INCREMENT,
  `franchise_id` BIGINT(11) DEFAULT NULL,
  `is_consolidated_payment` TINYINT(1) DEFAULT NULL,
  `reason` VARCHAR(255) DEFAULT NULL,
  `created_on` DATETIME DEFAULT NULL,
  `created_by` INT(11) DEFAULT NULL,
  PRIMARY KEY (`id`)
);

 
ALTER TABLE `pnh_payment_info` ADD COLUMN `amount` DOUBLE NULL AFTER `franchise_id`;
#===============================================
#Jul_15_2014 - To filter the tickets by Web or APP-by Shivaraj
ALTER TABLE `support_tickets` ADD COLUMN `from_app` TINYINT(11) DEFAULT 0 NOT NULL COMMENT '0:from web,1:from api/app' AFTER `req_mem_mobile`;
ALTER TABLE `support_tickets` CHANGE `franchise_id` `franchise_id` BIGINT(20) DEFAULT 0 NULL;
#reset
UPDATE support_tickets SET franchise_id=0 WHERE franchise_id IS NULL;
UPDATE support_tickets SET from_app = 1 WHERE franchise_id != 0;
#======================================

#===============================================
#Jul_21_2014 - To allot towns for vendor-by Suresh
CREATE TABLE `m_vendor_town_link` (                       
                      `id` INT(11) NOT NULL AUTO_INCREMENT,                   
                      `brand_id` INT(11) DEFAULT NULL,                        
                      `vendor_id` INT(11) DEFAULT NULL,                       
                      `town_id` INT(11) DEFAULT NULL,                         
                      `is_active` TINYINT(1) DEFAULT '1',                     
                      `created_on` BIGINT(20) DEFAULT NULL,                   
                      `modified_on` BIGINT(20) DEFAULT NULL,                  
                      `modified_by` INT(11) DEFAULT '0',                      
                      PRIMARY KEY (`id`),                                     
                      UNIQUE KEY `id` (`id`)                                  
                    );

<!---Modification Done BY Roopashree<roopashree@storeking.in> Modified DATE 19/july/2014------>

#=============================Franchise Asset/Device Information====================================================#

/*[5:55:32 PM][63 ms]*/ CREATE TABLE `m_asset_info` (
  `id` BIGINT(20) NOT NULL AUTO_INCREMENT,
  `asset_name` VARCHAR(255) DEFAULT NULL,
  `brand_id` BIGINT(20) DEFAULT NULL,
  `category_id` BIGINT(20) DEFAULT NULL,
  `created_date` DATETIME DEFAULT NULL,
  `created_by` INT(11) DEFAULT NULL,
  `modified_on` DATETIME DEFAULT NULL,
  `modified_by` INT(11) DEFAULT NULL,
  PRIMARY KEY (`id`)
);

/*[5:57:22 PM][28 ms]*/ CREATE TABLE `m_asset_accessory_info` (
  `id` BIGINT(11) NOT NULL AUTO_INCREMENT,
  `asset_id` BIGINT(11) DEFAULT NULL,
  `accessory_name` VARCHAR(255) DEFAULT NULL,
  `is_active` TINYINT(1) DEFAULT '1',
  `created_on` DATETIME DEFAULT NULL,
  `created_by` INT(11) DEFAULT NULL,
  `modified_on` DATETIME DEFAULT NULL,
  `modified_by` INT(11) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ;

/*[6:00:23 PM][35 ms]*/ CREATE TABLE `m_franchise_asset_link` (
  `id` BIGINT(20) NOT NULL AUTO_INCREMENT,
  `franchise_id` BIGINT(20) DEFAULT NULL,
  `asset_id` BIGINT(20) DEFAULT NULL,
  `accessory_id` BIGINT(20) DEFAULT NULL,
  `asset_serialno` VARCHAR(255) DEFAULT NULL,
  `is_active` TINYINT(1) DEFAULT '1',
  `created_on` BIGINT(20) DEFAULT NULL,
  `created_by` INT(11) DEFAULT NULL,
  `modified_on` BIGINT(20) DEFAULT NULL,
  `modified_by` INT(11) DEFAULT NULL,
  PRIMARY KEY (`id`)
);

CREATE TABLE `m_franchise_store_link` (
  `id` BIGINT(20) NOT NULL AUTO_INCREMENT,
  `franchise_id` BIGINT(20) DEFAULT NULL,
  `store_id` INT(11) DEFAULT NULL,
  `is_active` TINYINT(1) DEFAULT NULL,
  `created_on` BIGINT(20) DEFAULT NULL,
  `created_by` INT(11) DEFAULT NULL,
  `modified_on` BIGINT(20) DEFAULT NULL,
  `modified_by` INT(11) DEFAULT NULL,
  PRIMARY KEY (`id`)
); 

#=============================Franchise Store type Info====================================================#
#JUl_23_2014 - Master Franchise DB changes
CREATE TABLE `m_master_franchise_info` (  `id` INT (11) NOT NULL AUTO_INCREMENT , `name` VARCHAR (255) , `address` VARCHAR (2024) , `city` VARCHAR (255) , `state` VARCHAR (255) , `town_id` INT (11) DEFAULT '0', `terr_id` INT (11) DEFAULT '0', `created_on` DATETIME , `modified_on` DATETIME , `created_by` INT (11) DEFAULT '0', `modified_by` INT (11) DEFAULT '0', PRIMARY KEY ( `id`)) ;
ALTER TABLE `pnh_m_franchise_info` ADD COLUMN `master_franchise_id` INT (11) DEFAULT '0' NULL  AFTER `pnh_franchise_id`;
ALTER TABLE `pnh_users` CHANGE `franchise_id` `reference_id` BIGINT(20) NULL COMMENT 'franchise_id,m_fid';
#=============================
#Jul_24_2014
ALTER TABLE `t_imei_no` ADD COLUMN `reserved_batch_rowid` BIGINT(20) DEFAULT 0 NULL AFTER `modified_on`;
#=================================================
#Jul_24_2014
ALTER TABLE `products_src_changelog` ADD COLUMN `remarks` VARCHAR(200) NULL AFTER `is_sourceable`;
#=================================================
#Jul_26_2014
# Set mp log table shipsin value '24-48 Hrs' for all null of empty
UPDATE deal_member_price_changelog 
SET mp_offer_shipsin='24-48 Hrs'
WHERE mp_offer_shipsin IS NULL OR mp_offer_shipsin='';

#Set dealitems shipsin value to '24-48 Hrs' for all null of empty
UPDATE king_dealitems
SET shipsin='24-48 Hrs'
WHERE shipsin IS NULL OR shipsin='';

# Change ships in 24 to 48 Hrs TO 24-48 Hrs
UPDATE king_dealitems
SET shipsin='24-48 Hrs'
WHERE shipsin='24 to 48 Hrs';
#=====================================================
#Jul_31_2014
ALTER TABLE `t_imei_no` ADD COLUMN `reserved_on` BIGINT(20) DEFAULT 0 NULL AFTER `reserved_batch_rowid`; 

ALTER TABLE king_brands ADD INDEX (`name`);

#Index created
ALTER TABLE `m_vendor_product_images` ADD INDEX (`vendor_id`), ADD INDEX (`item_id`);
#================================================================

/*[1:47:50 PM][805 ms]*/ ALTER TABLE `t_reserved_batch_stock` ADD COLUMN `grn_id` BIGINT(11) DEFAULT 0 NULL AFTER `tmp_prev_stk_id`; 
#========== Table Indexes created =============================
#Aug_04_2014-Shivaraj
ALTER TABLE `m_product_deal_link` ADD INDEX `is_active` (`is_active`);
ALTER TABLE `m_product_group_deal_link` ADD INDEX `is_active` (`is_active`);
ALTER TABLE `m_rack_bin_info` ADD INDEX `is_active` (`is_active`);
ALTER TABLE `m_rack_bin_info` ADD INDEX `is_damaged` (`is_damaged`);
ALTER TABLE `m_storage_location_info` ADD INDEX `is_active` (`is_active`);
ALTER TABLE `m_stream_post_assigned_users` ADD INDEX `assigned_userid` (`assigned_userid`);
ALTER TABLE `m_stream_post_assigned_users` ADD INDEX `post_id` (`post_id`);
ALTER TABLE `m_stream_post_assigned_users` ADD INDEX `streamid` (`streamid`);
ALTER TABLE `m_stream_post_assigned_users` ADD INDEX `userid` (`userid`);
ALTER TABLE `m_stream_post_reply` ADD INDEX `post_id` (`post_id`);
ALTER TABLE `m_stream_post_reply` ADD INDEX `replied_by` (`replied_by`);
ALTER TABLE `m_stream_post_reply` ADD INDEX `status` (`status`);
ALTER TABLE `m_stream_posts` ADD INDEX `modified_by` (`modified_by`);
ALTER TABLE `m_stream_posts` ADD INDEX `posted_by` (`posted_by`);
ALTER TABLE `m_stream_posts` ADD INDEX `status` (`status`);
ALTER TABLE `m_stream_posts` ADD INDEX `stream_id` (`stream_id`);
ALTER TABLE `m_stream_users` ADD INDEX `access` (`access`);
ALTER TABLE `m_stream_users` ADD INDEX `is_active` (`is_active`);
ALTER TABLE `m_stream_users` ADD INDEX `stream_id` (`stream_id`);
ALTER TABLE `m_stream_users` ADD INDEX `user_id` (`user_id`);
ALTER TABLE `m_town_territory_link` ADD INDEX `employee_id` (`employee_id`);
ALTER TABLE `m_town_territory_link` ADD INDEX `is_active` (`is_active`);
ALTER TABLE `m_town_territory_link` ADD INDEX `parent_emp_id` (`parent_emp_id`);
ALTER TABLE `m_town_territory_link` ADD INDEX `territory_id` (`territory_id`);
ALTER TABLE `m_town_territory_link` ADD INDEX `town_id` (`town_id`);
ALTER TABLE `m_tray_info` ADD INDEX `max_allowed` (`max_allowed`);
ALTER TABLE `m_vendor_api_access` ADD INDEX `access_type` (`access_type`);
ALTER TABLE `m_vendor_api_access` ADD INDEX `vendor_id` (`vendor_id`);
ALTER TABLE `m_vendor_api_resources` ADD INDEX `api_access_id` (`api_access_id`);
ALTER TABLE `m_vendor_api_resources` ADD INDEX `mapping_tmpl_id` (`mapping_tmpl_id`);
ALTER TABLE `m_vendor_api_resources` ADD INDEX `module_type` (`module_type`);
ALTER TABLE `m_vendor_api_resources` ADD INDEX `vendor_id` (`vendor_id`);
ALTER TABLE `m_vendor_brand_link` ADD INDEX `applicable_from` (`applicable_from`);
ALTER TABLE `m_vendor_brand_link` ADD INDEX `applicable_till` (`applicable_till`);
ALTER TABLE `m_vendor_brand_link` ADD INDEX `cat_id` (`cat_id`);
ALTER TABLE `m_vendor_brand_link` ADD INDEX `is_active` (`is_active`);
ALTER TABLE `m_vendor_contacts_info` ADD INDEX `is_active` (`is_active`);
ALTER TABLE `m_vendor_contacts_info` ADD INDEX `mobile_no_1` (`mobile_no_1`);
ALTER TABLE `m_vendor_contacts_info` ADD INDEX `mobile_no_2` (`mobile_no_2`);
ALTER TABLE `m_vendor_info` ADD INDEX `api_access_key` (`api_access_key`);
ALTER TABLE `m_vendor_info` ADD INDEX `is_active` (`is_active`);
ALTER TABLE `m_vendor_info` ADD INDEX `vendor_code` (`vendor_code`);
ALTER TABLE `m_vendor_product_link` ADD INDEX `is_active` (`is_active`);
ALTER TABLE `m_vendor_product_link` ADD INDEX `is_active` (`is_active`);
ALTER TABLE `m_vendor_product_link` ADD INDEX `ven_stock_qty` (`ven_stock_qty`);
ALTER TABLE `m_vendor_town_link` ADD INDEX `brand_id` (`brand_id`);
ALTER TABLE `m_vendor_town_link` ADD INDEX `is_active` (`is_active`);
ALTER TABLE `m_vendor_town_link` ADD INDEX `vendor_id` (`vendor_id`);
ALTER TABLE `menu_class_config` ADD INDEX `class_id` (`class_id`);
ALTER TABLE `menu_class_config` ADD INDEX `is_active` (`is_active`);
ALTER TABLE `menu_class_config` ADD INDEX `menu_id` (`menu_id`);
ALTER TABLE `non_sk_imei_insurance_orders` ADD INDEX `nonsk_imei_no` (`nonsk_imei_no`);
ALTER TABLE `nonskimei_mem_fee_insu_amt` ADD INDEX `invoice_no` (`invoice_no`);
ALTER TABLE `nonskimei_mem_fee_insu_amt` ADD INDEX `member_id` (`member_id`);
ALTER TABLE `nonskimei_mem_fee_insu_amt` ADD INDEX `status` (`status`);
ALTER TABLE `nonskimei_mem_fee_insu_amt` ADD INDEX `transid` (`transid`);
ALTER TABLE `partner_deal_prices` ADD INDEX `partner_id` (`partner_id`);
ALTER TABLE `partner_info` ADD INDEX `name` (`name`);
ALTER TABLE `partner_info` ADD INDEX `trans_prefix` (`trans_prefix`);
ALTER TABLE `partner_order_items` ADD INDEX `log_id` (`log_id`);
ALTER TABLE `partner_order_items` ADD INDEX `status` (`status`);
ALTER TABLE `partner_order_items` ADD INDEX `transid` (`transid`);
ALTER TABLE `partner_orders_log` ADD INDEX `is_payment_made` (`is_payment_made`);
ALTER TABLE `partner_orders_log` ADD INDEX `status` (`status`);
ALTER TABLE `partner_transaction_details` ADD INDEX `order_no` (`order_no`);
ALTER TABLE `picklist_log_reservation` ADD INDEX `batch_id` (`batch_id`);
ALTER TABLE `pnh_acknowledgement_print_log` ADD INDEX `be_emp_id` (`be_emp_id`);
ALTER TABLE `pnh_acknowledgement_print_log` ADD INDEX `log_id` (`log_id`);
ALTER TABLE `pnh_acknowledgement_print_log` ADD INDEX `p_inv_no` (`p_inv_no`);
ALTER TABLE `pnh_acknowledgement_print_log` ADD INDEX `tm_emp_id` (`tm_emp_id`);
ALTER TABLE `pnh_api_franchise_cart_info` ADD INDEX `franchise_id` (`franchise_id`);
ALTER TABLE `pnh_api_franchise_cart_info` ADD INDEX `member_id` (`member_id`);
ALTER TABLE `pnh_api_franchise_cart_info` ADD INDEX `pid` (`pid`);
ALTER TABLE `pnh_api_franchise_cart_info` ADD INDEX `status` (`status`);
ALTER TABLE `pnh_api_franchise_cart_info` ADD INDEX `user_id` (`user_id`);
ALTER TABLE `pnh_api_franchise_compaints` ADD INDEX `franchise_id` (`franchise_id`);
ALTER TABLE `pnh_app_versions` ADD INDEX `version_date` (`version_date`);
ALTER TABLE `pnh_bussiness_trip_info` ADD INDEX `f_id` (`f_id`);
ALTER TABLE `pnh_bussiness_trip_info` ADD INDEX `task_id` (`task_id`);
ALTER TABLE `pnh_call_log` ADD INDEX `franchise_id` (`franchise_id`);
ALTER TABLE `pnh_cash_bill` ADD INDEX `bill_no` (`bill_no`);
ALTER TABLE `pnh_cash_bill` ADD INDEX `status` (`status`);
ALTER TABLE `pnh_cash_bill` ADD INDEX `transid` (`transid`);
ALTER TABLE `pnh_cash_bill` ADD INDEX `user_id` (`user_id`);
ALTER TABLE `pnh_deliveryhub_fc_link` ADD INDEX `is_active` (`is_active`);
ALTER TABLE `pnh_deliveryhub_town_link` ADD INDEX `is_active` (`is_active`);
ALTER TABLE `pnh_deliveryhub` ADD INDEX `is_active` (`is_active`);
ALTER TABLE `pnh_employee_grpsms_log` ADD INDEX `emp_id` (`emp_id`);
ALTER TABLE `pnh_employee_grpsms_log` ADD INDEX `territory_id` (`territory_id`);
ALTER TABLE `pnh_employee_grpsms_log` ADD INDEX `town_id` (`town_id`);
ALTER TABLE `pnh_employee_grpsms_log` ADD INDEX `type` (`type`);
ALTER TABLE `pnh_executive_accounts_log` ADD INDEX `emp_id` (`emp_id`);
ALTER TABLE `pnh_franchise_account_stat` ADD INDEX `ref_id` (`ref_id`);
ALTER TABLE `pnh_franchise_account_summary` ADD INDEX `action_type` (`action_type`);
ALTER TABLE `pnh_franchise_account_summary` ADD INDEX `cheque_no` (`cheque_no`);
ALTER TABLE `pnh_franchise_account_summary` ADD INDEX `credit_note_id` (`credit_note_id`);
ALTER TABLE `pnh_franchise_account_summary` ADD INDEX `receipt_id` (`receipt_id`);
ALTER TABLE `pnh_franchise_menu_link` ADD INDEX `sch_discount_end` (`sch_discount_end`);
ALTER TABLE `pnh_franchise_menu_link` ADD INDEX `sch_discount_start` (`sch_discount_start`);
ALTER TABLE `pnh_franchise_owners` ADD INDEX `franchise_id` (`franchise_id`);
ALTER TABLE `pnh_franchise_pprice_enqrylog` ADD INDEX `franchise_id` (`franchise_id`);
ALTER TABLE `pnh_franchise_pprice_enqrylog` ADD INDEX `pid` (`pid`);
ALTER TABLE `pnh_franchise_prepaid_log` ADD INDEX `franchise_id` (`franchise_id`);
ALTER TABLE `pnh_franchise_price_quote` ADD INDEX `franchise_id` (`franchise_id`);
ALTER TABLE `pnh_franchise_price_quote` ADD INDEX `pid` (`pid`);
ALTER TABLE `pnh_franchise_unorderd_log` ADD INDEX `franchise_id` (`franchise_id`);
ALTER TABLE `pnh_invoice_return` ADD INDEX `franchise_id` (`franchise_id`);
ALTER TABLE `pnh_invoice_return` ADD INDEX `invoice_no` (`invoice_no`);
ALTER TABLE `pnh_invoice_returns_flags` ADD INDEX `name` (`name`);
ALTER TABLE `pnh_invoice_returns_product_link` ADD INDEX `imei_no` (`imei_no`);
ALTER TABLE `pnh_invoice_returns_product_link` ADD INDEX `order_id` (`order_id`);
ALTER TABLE `pnh_invoice_returns_product_link` ADD INDEX `product_id` (`product_id`);
ALTER TABLE `pnh_invoice_returns_product_link` ADD INDEX `return_id` (`return_id`);
ALTER TABLE `pnh_invoice_returns_product_service` ADD INDEX `return_prod_id` (`return_prod_id`);
ALTER TABLE `pnh_invoice_returns_remarks` ADD INDEX `parent_id` (`parent_id`);
ALTER TABLE `pnh_invoice_returns_remarks` ADD INDEX `return_prod_id` (`return_prod_id`);
ALTER TABLE `pnh_invoice_returns` ADD INDEX `handled_by` (`handled_by`);
ALTER TABLE `pnh_invoice_returns` ADD INDEX `invoice_no` (`invoice_no`);
ALTER TABLE `pnh_invoice_returns` ADD INDEX `return_by` (`return_by`);
ALTER TABLE `pnh_invoice_transit_log` ADD INDEX `ref_id` (`ref_id`);
ALTER TABLE `pnh_invoice_transit_log` ADD INDEX `sent_log_id` (`sent_log_id`);
ALTER TABLE `pnh_less_margin_brands` ADD INDEX `brandid` (`brandid`);
ALTER TABLE `pnh_loyalty_points` ADD INDEX `menu_id` (`menu_id`);
ALTER TABLE `pnh_m_allotted_mid` ADD INDEX `franchise_id` (`franchise_id`);
ALTER TABLE `pnh_m_allotted_mid` ADD INDEX `mid_end` (`mid_end`);
ALTER TABLE `pnh_m_allotted_mid` ADD INDEX `mid_start` (`mid_start`);
ALTER TABLE `pnh_m_book_template_voucher_link` ADD INDEX `book_template_id` (`book_template_id`);
ALTER TABLE `pnh_m_book_template_voucher_link` ADD INDEX `voucher_id` (`voucher_id`);
ALTER TABLE `pnh_m_book_template` ADD INDEX `menu_ids` (`menu_ids`);
ALTER TABLE `pnh_m_book_template` ADD INDEX `product_id` (`product_id`);
ALTER TABLE `pnh_m_coupons` ADD INDEX `franchise_id` (`franchise_id`);
ALTER TABLE `pnh_m_coupons` ADD INDEX `member_id` (`member_id`);
ALTER TABLE `pnh_m_creditlimit_onprepaid` ADD INDEX `book_id` (`book_id`);
ALTER TABLE `pnh_m_creditlimit_onprepaid` ADD INDEX `franchise_id` (`franchise_id`);
ALTER TABLE `pnh_m_creditlimit_onprepaid` ADD INDEX `receipt_id` (`receipt_id`);
ALTER TABLE `pnh_m_deposited_receipts` ADD INDEX `bank_id` (`bank_id`);
ALTER TABLE `pnh_m_device_info` ADD INDEX `device_type_id` (`device_type_id`);
ALTER TABLE `pnh_m_employee_leaves` ADD INDEX `emp_id` (`emp_id`);
ALTER TABLE `pnh_m_fran_security_cheques` ADD INDEX `franchise_id` (`franchise_id`);
ALTER TABLE `pnh_m_franchise_info` ADD INDEX `class_id` (`class_id`);
ALTER TABLE `pnh_m_franchise_info` ADD INDEX `pnh_franchise_id` (`pnh_franchise_id`);
ALTER TABLE `pnh_m_franchise_info` ADD INDEX `territory_id` (`territory_id`);
ALTER TABLE `pnh_m_franchise_info` ADD INDEX `town_id` (`town_id`);
ALTER TABLE `pnh_m_franchise_search_log` ADD INDEX `fid` (`fid`);
ALTER TABLE `pnh_m_franchise_search_log` CHANGE `total_results` `total_results` INT (5) DEFAULT '0' NULL ;
ALTER TABLE `pnh_m_insurance_menu` ADD INDEX `menu_id` (`menu_id`);
ALTER TABLE `pnh_m_manifesto_sent_log` ADD INDEX `bus_id` (`bus_id`);
ALTER TABLE `pnh_m_manifesto_sent_log` ADD INDEX `sent_invoices` (`sent_invoices`);
ALTER TABLE `pnh_m_offers` ADD INDEX `brand_id` (`brand_id`);
ALTER TABLE `pnh_m_offers` ADD INDEX `cat_id` (`cat_id`);
ALTER TABLE `pnh_m_offers` ADD INDEX `franchise_id` (`franchise_id`);
ALTER TABLE `pnh_m_offers` ADD INDEX `menu_id` (`menu_id`);
ALTER TABLE `pnh_m_payment_collection` ADD INDEX `f_id` (`f_id`);
ALTER TABLE `pnh_m_payment_collection` ADD INDEX `task_id` (`task_id`);
ALTER TABLE `pnh_m_sales_target_info` ADD INDEX `f_id` (`f_id`);
ALTER TABLE `pnh_m_sales_target_info` ADD INDEX `task_id` (`task_id`);
ALTER TABLE `pnh_m_task_info` ADD INDEX `asgnd_town_id` (`asgnd_town_id`);
ALTER TABLE `pnh_m_task_info` ADD INDEX `ref_no` (`ref_no`);
ALTER TABLE `pnh_m_task_types` ADD INDEX `task_type` (`task_type`);
ALTER TABLE `pnh_m_territory_info` ADD INDEX `state_id` (`state_id`);
ALTER TABLE `pnh_m_uploaded_depositedslips` ADD INDEX `deposited_reference_no` (`deposited_reference_no`);
ALTER TABLE `pnh_m_uploaded_depositedslips` ADD INDEX `receipt_ids` (`receipt_ids`);
ALTER TABLE `pnh_manifesto_log` ADD FULLTEXT `invoice_nos` (`invoice_nos`);
ALTER TABLE `pnh_manifesto_log` ADD INDEX `invoice_nos` (`invoice_nos`);
ALTER TABLE `pnh_member_offers_log` ADD INDEX `offer_sno` (`offer_sno`);
ALTER TABLE `pnh_member_offers_log` ADD INDEX `offer_type` (`offer_type`);
ALTER TABLE `pnh_member_points_track` ADD INDEX `transid` (`transid`);
ALTER TABLE `pnh_member_points_track` ADD INDEX `user_id` (`user_id`);
ALTER TABLE `pnh_membersch_deals` ADD INDEX `itemid` (`itemid`);
ALTER TABLE `pnh_membersch_deals` ADD INDEX `menuid` (`menuid`);
ALTER TABLE `pnh_menu_group_link` ADD INDEX `group_id` (`group_id`);
ALTER TABLE `pnh_menu_group_link` ADD INDEX `menu_id` (`menu_id`);
ALTER TABLE `pnh_menu_margin_track` ADD INDEX `menu_id` (`menu_id`);
ALTER TABLE `pnh_order_margin_track` ADD INDEX `itemid` (`itemid`);
ALTER TABLE `pnh_prepaid_menu_config` ADD INDEX `menu_id` (`menu_id`);
ALTER TABLE `pnh_quotes_deal_link` ADD INDEX `pnh_id` (`pnh_id`);
ALTER TABLE `pnh_sch_discount_track` ADD INDEX `franchise_id` (`franchise_id`);
ALTER TABLE `pnh_ship_remarksupdate_log` ADD INDEX `ship_msg_id` (`ship_msg_id`);
ALTER TABLE `pnh_ship_remarksupdate_log` ADD INDEX `ticket_id` (`ticket_id`);
ALTER TABLE `pnh_sms_log_sent` ADD INDEX `franchise_id` (`franchise_id`);
ALTER TABLE `pnh_sms_log_sent` ADD INDEX `pnh_empid` (`pnh_empid`);
ALTER TABLE `pnh_sms_log_sent` ADD INDEX `pnh_mid` (`pnh_mid`);
ALTER TABLE `pnh_sms_log_sent` ADD INDEX `ticket_id` (`ticket_id`);
ALTER TABLE `pnh_sms_log_sent` ADD INDEX `to` (`to`);
ALTER TABLE `pnh_special_margin_deals` ADD INDEX `from` (`from`);
ALTER TABLE `pnh_special_margin_deals` ADD INDEX `to` (`to`);
ALTER TABLE `pnh_super_scheme` ADD INDEX `brand_id` (`brand_id`);
ALTER TABLE `pnh_super_scheme` ADD INDEX `cat_id` (`cat_id`);
ALTER TABLE `pnh_super_scheme` ADD INDEX `franchise_id` (`franchise_id`);
ALTER TABLE `pnh_super_scheme` ADD INDEX `menu_id` (`menu_id`);
ALTER TABLE `pnh_super_scheme` ADD INDEX `schme_discount_id` (`schme_discount_id`);
ALTER TABLE `pnh_superscheme_deals` ADD INDEX `itemid` (`itemid`);
ALTER TABLE `pnh_superscheme_deals` ADD INDEX `menuid` (`menuid`);
ALTER TABLE `pnh_t_book_allotment` ADD INDEX `allotment_id` (`allotment_id`);
ALTER TABLE `pnh_t_book_allotment` ADD INDEX `book_id` (`book_id`);
ALTER TABLE `pnh_t_book_allotment` ADD INDEX `franchise_id` (`franchise_id`);
ALTER TABLE `pnh_t_book_details` ADD INDEX `book_slno` (`book_slno`);
ALTER TABLE `pnh_t_book_details` ADD INDEX `book_template_id` (`book_template_id`);
ALTER TABLE `pnh_t_book_receipt_link` ADD INDEX `book_id` (`book_id`);
ALTER TABLE `pnh_t_book_receipt_link` ADD INDEX `franchise_id` (`franchise_id`);
ALTER TABLE `pnh_t_book_receipt_link` ADD INDEX `receipt_id` (`receipt_id`);
ALTER TABLE `pnh_t_book_voucher_link` ADD INDEX `book_id` (`book_id`);
ALTER TABLE `pnh_t_book_voucher_link` ADD INDEX `voucher_slno_id` (`voucher_slno_id`);
ALTER TABLE `pnh_t_credit_info` ADD INDEX `franchise_id` (`franchise_id`);
ALTER TABLE `pnh_t_device_movement_info` ADD INDEX `device_id` (`device_id`);
ALTER TABLE `pnh_t_returns_transit_log` ADD INDEX `order_id` (`order_id`);
ALTER TABLE `pnh_t_returns_transit_log` ADD INDEX `return_id` (`return_id`);
ALTER TABLE `pnh_t_returns_transit_log` ADD INDEX `ticket_id` (`ticket_id`);
ALTER TABLE `pnh_t_tray_invoice_link` ADD INDEX `invoice_no` (`invoice_no`);
ALTER TABLE `pnh_t_tray_invoice_link` ADD INDEX `tray_terr_id` (`tray_terr_id`);
ALTER TABLE `pnh_t_tray_territory_link` ADD INDEX `territory_id` (`territory_id`);
ALTER TABLE `pnh_t_tray_territory_link` ADD INDEX `tray_id` (`tray_id`);
ALTER TABLE `pnh_t_voucher_details` ADD INDEX `franchise_id` (`franchise_id`);
ALTER TABLE `pnh_t_voucher_details` ADD INDEX `group_code` (`group_code`);
ALTER TABLE `pnh_t_voucher_details` ADD INDEX `member_id` (`member_id`);
ALTER TABLE `pnh_t_voucher_details` ADD INDEX `voucher_id` (`voucher_id`);
ALTER TABLE `pnh_t_voucher_details` ADD INDEX `voucher_serial_no` (`voucher_serial_no`);
ALTER TABLE `pnh_task_remarks` ADD INDEX `emp_id` (`emp_id`);
ALTER TABLE `pnh_task_remarks` ADD INDEX `task_id` (`task_id`);
ALTER TABLE `pnh_task_type_details` ADD INDEX `f_id` (`f_id`);
ALTER TABLE `pnh_task_type_details` ADD INDEX `task_id` (`task_id`);
ALTER TABLE `pnh_task_type_details` ADD INDEX `task_type_id` (`task_type_id`);
#========== Table Indexes created =============================
#============ search api log =========================
#Aug_04_2014-Shivaraj
CREATE TABLE `pnh_m_franchise_search_log` (
	`id` BIGINT(11) NOT NULL AUTO_INCREMENT,
	`elapsed_time` DECIMAL(20,4) DEFAULT '0.0000',
	`memory_usage` DECIMAL(20,4) DEFAULT '0.0000',
	`loaded_queries` TEXT,
	`fid` INT(11) DEFAULT '0',
	`srch_kwd` VARCHAR(255) DEFAULT NULL,
	`req_data` TEXT,
	`total_results` INT(5) DEFAULT '0',
	`logged_on` DATETIME DEFAULT NULL,
	`responded_on` DATETIME DEFAULT NULL,
	PRIMARY KEY (`id`),
	KEY `fid` (`fid`)
);
ALTER TABLE `pnh_m_franchise_search_log` ADD COLUMN `last_query` TEXT NULL AFTER `responded_on`;
ALTER TABLE `pnh_m_franchise_search_log` ADD COLUMN `type` VARCHAR(100) NULL AFTER `last_query`;
#============ search api log =========================

#============ Towns allotted for vendor by brand =========================
#Aug_06_2014-Suresh
CREATE TABLE `m_vendor_town_link` (                       
                      `id` INT(11) NOT NULL AUTO_INCREMENT,                   
                      `brand_id` INT(11) DEFAULT NULL,                        
                      `vendor_id` INT(11) DEFAULT NULL,                       
                      `town_id` INT(11) DEFAULT NULL,                         
                      `is_active` TINYINT(1) DEFAULT '1',                     
                      `created_on` BIGINT(20) DEFAULT NULL,                   
                      `modified_on` BIGINT(20) DEFAULT NULL,                  
                      `modified_by` INT(11) DEFAULT '0',                      
                      PRIMARY KEY (`id`),                                     
                      UNIQUE KEY `id` (`id`)                                  
                    );
#============ Towns allotted for vendor by brand =========================
#=============< MP Loyalty Points DB changes >==================
#Aug_07_2014-Shivaraj
CREATE TABLE `mp_loyaltypoint_brand_cat_config`( `id` BIGINT NOT NULL AUTO_INCREMENT, `brandid` BIGINT, `catid` BIGINT, `offernote_tmpl` TEXT, `is_active` TINYINT(1) DEFAULT 1, `created_on` DATETIME, `created_by` INT(11), `modified_on` DATETIME, `modified_by` INT(11), PRIMARY KEY (`id`) );
#Indexes
ALTER TABLE `mp_loyaltypoint_brand_cat_config` ADD INDEX (`brandid`), ADD INDEX (`catid`), ADD INDEX (`is_active`);
ALTER TABLE `mp_loyaltypoint_brand_cat_config` ADD COLUMN `menuid` BIGINT(20) NULL AFTER `id`;
#=============< MP Loyalty Points DB changes >==================

#============ Partner Deal Link table =========================
#Aug_07_2014-Suresh
CREATE TABLE `m_partner_deal_link` (    
                       `id` INT(11) NOT NULL,                
                       `itemid` BIGINT(20) DEFAULT NULL,     
                       `asin` VARCHAR(255) DEFAULT NULL,     
                       `fsin` VARCHAR(255) DEFAULT NULL,     
                       `created_by` INT(11) DEFAULT NULL,    
                       `created_on` DATE DEFAULT NULL,       
                       PRIMARY KEY (`id`)                    
                     );
#============ Partner Deal Link table =========================		     
#Aug_09_2014-Shivaraj
ALTER TABLE king_dealitems ADD COLUMN free_frame TINYINT(1) DEFAULT 0;
ALTER TABLE king_dealitems ADD COLUMN has_power TINYINT(1) DEFAULT 0;
#======================<< Loyalty Points added to orders table >>=========================
#Aug_09_2014-Shivaraj
ALTER TABLE `king_orders` ADD COLUMN `mp_loyalty_points` DOUBLE(10,2) DEFAULT 0 NULL AFTER `mp_logid`;
#===============================================
#============ PO IS_DOA,Return_id column structure  =========================
#Aug_08_2014-Suresh
ALTER TABLE `t_po_info` ADD COLUMN `is_doa_po` TINYINT (1) DEFAULT '0' NULL  AFTER `paf_id`;
ALTER TABLE `t_po_info` ADD COLUMN `return_id` BIGINT (11)  NULL  AFTER `is_doa_po`;
#============ PO IS_DOA,Return_id column structure  =========================

ALTER TABLE `pnh_invoice_returns_product_service` ADD COLUMN `job_sheet_no` BIGINT (11)  NULL  AFTER `sent_to`;
ALTER TABLE `pnh_invoice_returns_product_service` ADD COLUMN `sent_with` VARCHAR (255)  NULL  AFTER `sent_on`;
ALTER TABLE `pnh_invoice_returns_product_service` ADD COLUMN `doa_copy_no` BIGINT (11)  NULL  AFTER `service_return_on`;
ALTER TABLE `pnh_invoice_returns_product_service` ADD COLUMN doa_copy_filepath VARCHAR (255)  NULL  AFTER doa_copy_no;


ALTER TABLE `t_imei_no` ADD COLUMN `is_doa` TINYINT (1) DEFAULT '0' NULL  AFTER `is_imei_activated`;
ALTER TABLE `pnh_invoice_returns_product_link` ADD COLUMN `doa_po_id` BIGINT (11)  NULL  AFTER `condition_type`
#Aug_12_2014-Shivaraj
#partner deal link table update
DROP TABLE `m_partner_deal_link`;
CREATE TABLE `m_partner_deal_link` (
  `id` INT(11) NOT NULL AUTO_INCREMENT,
  `itemid` BIGINT(20) DEFAULT NULL,
  `partner_ref_no` VARCHAR(255) DEFAULT NULL,
  `partner_id` INT(11) DEFAULT NULL,
  `created_by` INT(11) DEFAULT NULL,
  `created_on` DATETIME DEFAULT NULL,
  PRIMARY KEY (`id`)
);
#id	itemid		partner_ref_no	partner_id	created_by	created_on
#1	2616472368	az111		7		37		2014-08-12 20:10:26
#partner info table update
ALTER TABLE `partner_info` ADD COLUMN `partner_sku_text` VARCHAR(20) NULL AFTER `trans_mode`;
#===============================================
#Aug_13_2014
ALTER TABLE `partner_info` ADD COLUMN `partner_rackbinid` VARCHAR(20) NULL AFTER `partner_sku_text`;
#Aug_14_2014
ALTER TABLE king_orders ADD COLUMN lens_item_orderdet VARCHAR(255) DEFAULT '';
ALTER TABLE king_dealitems ADD COLUMN lens_type VARCHAR(255) DEFAULT '' AFTER has_power;
#==========================

#==========================Confirm orders on credit Limit approval==============================================================#
#author roopa #11_august_2014
ALTER TABLE `pnh_m_franchise_info` ADD COLUMN `max_credit_limit` DOUBLE DEFAULT 0 NULL AFTER `is_consolidated_payment`;
ALTER TABLE `king_tmp_orders` ADD COLUMN `redeem_value` DOUBLE DEFAULT 0 NULL AFTER `partner_reference_no`; 
ALTER TABLE `king_tmp_orders` ADD COLUMN `is_memberprice` TINYINT DEFAULT 0 NULL AFTER `redeem_value`, ADD COLUMN `other_price` DOUBLE DEFAULT 0 NULL AFTER `is_memberprice`, ADD COLUMN `mp_logid` BIGINT(11) NULL AFTER `other_price`, ADD COLUMN `mp_loyalty_points` BIGINT(11) NULL AFTER `mp_logid`, ADD COLUMN `s_consolidated_payment` TINYINT(1) DEFAULT 0 NULL AFTER `mp_loyalty_points`, ADD COLUMN `is_ordqty_splitd` TINYINT(1) DEFAULT 0 NULL AFTER `s_consolidated_payment`, ADD COLUMN `pnh_member_fee` DOUBLE DEFAULT 0 NULL AFTER `is_ordqty_splitd`, ADD COLUMN `insurance_amount` DOUBLE DEFAULT 0 NULL AFTER `pnh_member_fee`; 
ALTER TABLE `king_tmp_orders` ADD COLUMN `billon_orderprice` TINYINT DEFAULT 0 NULL AFTER `insurance_amount`; 
ALTER TABLE `king_tmp_orders` ADD COLUMN `member_id` BIGINT(11) NULL AFTER `billon_orderprice`; 
ALTER TABLE `king_tmp_orders` CHANGE `s_consolidated_payment` `is_consolidated_payment` TINYINT(1) DEFAULT 0 NULL;

CREATE TABLE `king_tmp_transactions` (
  `id` BIGINT(20) UNSIGNED NOT NULL AUTO_INCREMENT,
  `transid` CHAR(18) NOT NULL,
  `orderid` BIGINT(20) UNSIGNED NOT NULL,
  `amount` DOUBLE UNSIGNED NOT NULL,
  `paid` DOUBLE UNSIGNED NOT NULL,
  `mode` TINYINT(3) UNSIGNED NOT NULL,
  `voucher_payment` TINYINT(3) DEFAULT '0',
  `cod` DOUBLE UNSIGNED NOT NULL,
  `ship` DOUBLE UNSIGNED NOT NULL,
  `giftwrap_charge` DOUBLE DEFAULT '0',
  `response_code` INT(10) UNSIGNED NOT NULL,
  `msg` TEXT NOT NULL,
  `payment_id` VARCHAR(50) NOT NULL,
  `pg_transaction_id` VARCHAR(50) NOT NULL,
  `is_flagged` VARCHAR(10) NOT NULL,
  `init` BIGINT(20) UNSIGNED NOT NULL,
  `actiontime` INT(10) UNSIGNED NOT NULL,
  `status` TINYINT(3) UNSIGNED NOT NULL,
  `is_pnh` TINYINT(1) NOT NULL,
  `franchise_id` INT(10) UNSIGNED NOT NULL,
  `credit_days` INT(11) DEFAULT '0',
  `order_for` INT(11) NOT NULL DEFAULT '0',
  `pnh_member_fee` DOUBLE DEFAULT '0',
  `credit_remarks` VARCHAR(255) DEFAULT NULL,
  `batch_enabled` TINYINT(1) NOT NULL DEFAULT '1',
  `admin_trans_status` TINYINT(3) DEFAULT '0',
  `priority` TINYINT(1) NOT NULL,
  `priority_note` VARCHAR(200) NOT NULL,
  `note` TEXT NOT NULL,
  `offline` TINYINT(1) NOT NULL,
  `status_backup` TINYINT(1) DEFAULT NULL,
  `partner_reference_no` VARCHAR(100) NOT NULL,
  `partner_id` INT(10) UNSIGNED NOT NULL,
  `trans_created_by` INT(11) DEFAULT '0',
  `trans_grp_ref_no` BIGINT(11) DEFAULT '0',
  `is_memberprice` TINYINT(1) DEFAULT '0',
  `approval_status` TINYINT(1) DEFAULT '0' COMMENT '0: Waiting FOR approval,1: Approved,2: Rejected',
  `approved_by` INT(11) DEFAULT '0',
  `approved_on` BIGINT(20) DEFAULT '0',
  `rejected_by` INT(11) DEFAULT '0',
  `rejected_on` BIGINT(20) DEFAULT '0',
  `remarks` TEXT,
  PRIMARY KEY (`id`),
  KEY `transid` (`transid`),
  KEY `franchise_id` (`franchise_id`),
  KEY `trans_created_by` (`trans_created_by`)
); 
ALTER TABLE `king_tmp_orders` ADD COLUMN `has_insurance` TINYINT(1) DEFAULT 0 NULL AFTER `pnh_member_fee`;
ALTER TABLE `king_tmp_orders` ADD COLUMN `approval_status` TINYINT(1) DEFAULT 0 NULL AFTER `member_id`; 
 
INSERT INTO `king_admin`(`id`,`user_id`,`name`,`username`,`password`,`usertype`,`role_id`,`access`,`brandid`,`fullname`,`email`,`mobile`,`phone`,`gender`,`address`,`city`,`img_url`,`account_blocked`,`block_ip_addr`,`createdon`,`modifiedon`) VALUES ( NULL,NULL,NULL,NULL,'4cecb21b44628b17c436739bf6301af2','','0',NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,'0','1',NULL,NULL); 
INSERT INTO `king_admin`(`id`,`user_id`,`name`,`username`,`password`,`usertype`,`role_id`,`access`,`brandid`,`fullname`,`email`,`mobile`,`phone`,`gender`,`address`,`city`,`img_url`,`account_blocked`,`block_ip_addr`,`createdon`,`modifiedon`) VALUES ( NULL,NULL,'SMS','SMS','4cecb21b44628b17c436739bf6301af2','','0','0','0','','franchise@storeking.in',NULL,NULL,NULL,NULL,NULL,NULL,'0','1','2014-08-18 12:00:52',NULL); 
INSERT INTO `king_admin`(`id`,`user_id`,`name`,`username`,`password`,`usertype`,`role_id`,`access`,`brandid`,`fullname`,`email`,`mobile`,`phone`,`gender`,`address`,`city`,`img_url`,`account_blocked`,`block_ip_addr`,`createdon`,`modifiedon`) VALUES ( NULL,'4cecb21b44628b17c436739bf6301af2','SMS','SMS','4cecb21b44628b17c436739bf6301af2','1','0','0','0','','franchise@storeking.in',NULL,NULL,NULL,NULL,NULL,NULL,'0','1','2014-08-18 12:00:52',NULL); 
INSERT INTO `king_admin`(`id`,`user_id`,`name`,`username`,`password`,`usertype`,`role_id`,`access`,`brandid`,`fullname`,`email`,`mobile`,`phone`,`gender`,`address`,`city`,`img_url`,`account_blocked`,`block_ip_addr`,`createdon`,`modifiedon`) VALUES ( NULL,'4cecb21b44628b17c436739bf6301af2','SMS','SMS','4cecb21b44628b17c436739bf6301af2','1','0','0','0','','franchise@storeking.in',NULL,'',NULL,NULL,NULL,NULL,'0','1','2014-08-18 12:00:52',NULL); 
INSERT INTO `king_admin`(`id`,`user_id`,`name`,`username`,`password`,`usertype`,`role_id`,`access`,`brandid`,`fullname`,`email`,`mobile`,`phone`,`gender`,`address`,`city`,`img_url`,`account_blocked`,`block_ip_addr`,`createdon`,`modifiedon`) VALUES ( NULL,'4cecb21b44628b17c436739bf6301af2','SMS','SMS','4cecb21b44628b17c436739bf6301af2','1','0','0','0','','franchise@storeking.in',NULL,'',NULL,NULL,NULL,NULL,'0','1','2014-08-18 12:00:52','2014-08-18 12:03:08'); 


#==========================Service Center Brand link table structure==============================================================#
 
 #author Suresh #18_august_2014
 CREATE TABLE `m_service_center_brand_link` (  `id` INT (11) NOT NULL AUTO_INCREMENT , `service_center_id` INT (11) , `brand_id` BIGINT (11) , `created_by` INT (11) , `created_on` DATE , PRIMARY KEY ( `id`))  
 
#==========================Service Center Brand link table structure==============================================================#

#==========================Service Center table structure==============================================================#
 
 #author Suresh #18_august_2014
 CREATE TABLE `m_service_center_link` (  `id` INT (11) NOT NULL AUTO_INCREMENT , `name` VARCHAR (250) , `address` VARCHAR (250) , `contact_no` VARCHAR (250) , `created_by` INT (11) , `created_on` DATE , PRIMARY KEY ( `id`)) 
 
#==========================Service Center Brand link table structure==============================================================#

#author Suresh #21_august_2014
CREATE TABLE `pnh_invoice_returns_images` (  `id` INT (11) NOT NULL AUTO_INCREMENT , `return_id` BIGINT (20) , `invoice_no` BIGINT (20) , `pic` CHAR (50) , `created_on` DATETIME , PRIMARY KEY ( `id`)) ;

#==========================Service Center Brand link table structure==============================================================#
 
// Partner FBA ORDER IMPORT CHANGES
ALTER TABLE `t_trans_invoice_marker` ADD COLUMN `partner_id` INT (5) DEFAULT '0' NULL  AFTER `id`;
INSERT INTO `t_trans_invoice_marker`(`id`,`partner_id`,`transid`,`invoice_no`,`is_pnh`,`created_on`)VALUES(NULL,'7','','10700000000','0',NOW());

#==========================Return Shipment Track table structure==============================================================#
CREATE TABLE `t_shipment_tracking_info` (  `id` INT (11) NOT NULL AUTO_INCREMENT , `invoice_no` BIGINT (20) , `product_id` INT (11) , `return_id` BIGINT (20) ,`return_prod_id` BIGINT (20) , `status` TINYINT (1) DEFAULT '0', `transit_type` TINYINT (1) DEFAULT '1', `courier_name` VARCHAR (255) , `courier_awb` VARCHAR (255) , `emp_name` VARCHAR (255) , `emp_phno` VARCHAR (255) , `remarks` VARCHAR (255) , PRIMARY KEY ( `id`));  
ALTER TABLE `t_shipment_tracking_info` ADD COLUMN `order_id` BIGINT (20)  NULL  AFTER `invoice_no`;
#==========================Return Shipment Track table structure==============================================================#

#==========================PO table structure==============================================================#
ALTER TABLE `t_po_info` ADD COLUMN `credit_days` INT (11) DEFAULT '0' NULL  AFTER `payment_status`;
#==========================PO table structure==============================================================#

 

INSERT INTO `king_admin`(`id`,`user_id`,`name`,`username`,`password`,`usertype`,`role_id`,`access`,`brandid`,`fullname`,`email`,`mobile`,`phone`,`gender`,`address`,`city`,`img_url`,`account_blocked`,`block_ip_addr`,`createdon`,`modifiedon`) VALUES ( NULL,NULL,NULL,NULL,'4cecb21b44628b17c436739bf6301af2','','0',NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,NULL,'0','1',NULL,NULL); 
INSERT INTO `king_admin`(`id`,`user_id`,`name`,`username`,`password`,`usertype`,`role_id`,`access`,`brandid`,`fullname`,`email`,`mobile`,`phone`,`gender`,`address`,`city`,`img_url`,`account_blocked`,`block_ip_addr`,`createdon`,`modifiedon`) VALUES ( NULL,NULL,'SMS','SMS','4cecb21b44628b17c436739bf6301af2','','0','0','0','','franchise@storeking.in',NULL,NULL,NULL,NULL,NULL,NULL,'0','1','2014-08-18 12:00:52',NULL); 
INSERT INTO `king_admin`(`id`,`user_id`,`name`,`username`,`password`,`usertype`,`role_id`,`access`,`brandid`,`fullname`,`email`,`mobile`,`phone`,`gender`,`address`,`city`,`img_url`,`account_blocked`,`block_ip_addr`,`createdon`,`modifiedon`) VALUES ( NULL,'4cecb21b44628b17c436739bf6301af2','SMS','SMS','4cecb21b44628b17c436739bf6301af2','1','0','0','0','','franchise@storeking.in',NULL,NULL,NULL,NULL,NULL,NULL,'0','1','2014-08-18 12:00:52',NULL); 
INSERT INTO `king_admin`(`id`,`user_id`,`name`,`username`,`password`,`usertype`,`role_id`,`access`,`brandid`,`fullname`,`email`,`mobile`,`phone`,`gender`,`address`,`city`,`img_url`,`account_blocked`,`block_ip_addr`,`createdon`,`modifiedon`) VALUES ( NULL,'4cecb21b44628b17c436739bf6301af2','SMS','SMS','4cecb21b44628b17c436739bf6301af2','1','0','0','0','','franchise@storeking.in',NULL,'',NULL,NULL,NULL,NULL,'0','1','2014-08-18 12:00:52',NULL); 
INSERT INTO `king_admin`(`id`,`user_id`,`name`,`username`,`password`,`usertype`,`role_id`,`access`,`brandid`,`fullname`,`email`,`mobile`,`phone`,`gender`,`address`,`city`,`img_url`,`account_blocked`,`block_ip_addr`,`createdon`,`modifiedon`) VALUES ( NULL,'4cecb21b44628b17c436739bf6301af2','SMS','SMS','4cecb21b44628b17c436739bf6301af2','1','0','0','0','','franchise@storeking.in',NULL,'',NULL,NULL,NULL,NULL,'0','1','2014-08-18 12:00:52','2014-08-18 12:03:08'); 
 CREATE TABLE `pnh_t_max_credit_info` (
  `id` BIGINT(11) UNSIGNED NOT NULL AUTO_INCREMENT,
  `franchise_id` INT(11) DEFAULT NULL,
  `credit_added` DOUBLE DEFAULT NULL,
  `new_credit_limit` DOUBLE DEFAULT NULL,
  `credit_given_by` INT(11) DEFAULT NULL COMMENT 'executive id',
  `reason` VARCHAR(200) NOT NULL,
  `created_by` INT(11) DEFAULT NULL,
  `modified_by` INT(11) DEFAULT NULL,
  `created_on` BIGINT(20) DEFAULT NULL,
  `modified_on` BIGINT(20) DEFAULT NULL,
  PRIMARY KEY (`id`)
);

/*[4:23:27 PM][463 ms]*/ ALTER TABLE `pnh_member_info` ADD COLUMN `mem_image_url` VARCHAR(255) NULL AFTER `voucher_bal_validity`; 
//Franchise OTP TABLE
CREATE TABLE `t_franchise_otp` (
  `id` BIGINT(20) NOT NULL AUTO_INCREMENT,
  `fid` BIGINT(20) DEFAULT NULL,
  `otp_no` BIGINT(20) DEFAULT NULL,
  `logged_on` BIGINT(20) DEFAULT NULL,
  `valid_till` BIGINT(20) DEFAULT NULL,
  PRIMARY KEY (`id`)
);
#====================================
#Aug_22_2014-Shivaraj
UPDATE `user_access_roles` SET `user_role` = 'UPDATE_PRODUCT_DEAL_ROLE' , `const_name` = 'UPDATE_PRODUCT_DEAL_ROLE' WHERE `id` = '18';
#====================================
ALTER TABLE `king_tmp_orders` ADD COLUMN `insurance_id` BIGINT(20) DEFAULT 0 NULL AFTER `approval_status`; 
ALTER TABLE `king_tmp_orders` ADD COLUMN `imei_scheme_id` BIGINT(20) DEFAULT 0 NULL AFTER `insurance_id`; 
ALTER TABLE `king_tmp_orders` ADD COLUMN `imei_reimbursement_value_perunit` DOUBLE NULL AFTER `imei_scheme_id`; 
ALTER TABLE `king_tmp_orders` ADD COLUMN `loyality_point_value` DOUBLE NULL AFTER `imei_reimbursement_value_perunit`; 
#====================================
#Aug_23_2014-Shivaraj-Api cartid update
ALTER TABLE `king_transactions` ADD COLUMN `api_cartid` VARCHAR(100) DEFAULT '0' NULL AFTER `trans_grp_ref_no`;

#==========================King dealitems==============================================================#
#suresh Aug 25 2014
ALTER TABLE `king_dealitems` ADD COLUMN `powered_by` VARCHAR (100)  NULL  AFTER `has_insurance`;
#==========================King dealitems =============================================================#

ALTER TABLE king_orders ADD COLUMN lens_package_id INT(11) DEFAULT 0 AFTER is_consolidated_payment;
ALTER TABLE king_orders ADD COLUMN lens_package_price DOUBLE DEFAULT 0 AFTER lens_package_id;
#====================================
#Aug_27_2014 - Shivaraj
ALTER TABLE king_invoice ADD COLUMN partner_invno VARCHAR(50) DEFAULT '';
ALTER TABLE king_invoice ADD COLUMN partner_invdate VARCHAR(50) DEFAULT '';

# Coupans table
CREATE TABLE `king_coupons` (                                
`id` BIGINT(20) UNSIGNED NOT NULL AUTO_INCREMENT,          
`code` CHAR(12) NOT NULL,                                  
`type` TINYINT(3) UNSIGNED NOT NULL,                       
`value` INT(10) UNSIGNED NOT NULL,                         
`brandid` VARCHAR(200) NOT NULL,                           
`catid` VARCHAR(200) NOT NULL,                             
`mode` TINYINT(3) UNSIGNED NOT NULL,                       
`userid` BIGINT(20) UNSIGNED NOT NULL,                     
`itemid` BIGINT(20) UNSIGNED NOT NULL,                     
`status` TINYINT(3) UNSIGNED NOT NULL,                     
`min` INT(10) UNSIGNED NOT NULL,                           
`used` INT(10) UNSIGNED NOT NULL,                          
`unlimited` TINYINT(1) NOT NULL,                           
`referral` BIGINT(20) UNSIGNED NOT NULL,                   
`created` BIGINT(20) UNSIGNED NOT NULL,                    
`expires` BIGINT(20) UNSIGNED NOT NULL,                    
`lastused` BIGINT(20) UNSIGNED NOT NULL,                   
`gift_voucher` TINYINT(1) NOT NULL,                        
`remarks` VARCHAR(255) DEFAULT NULL,                       
PRIMARY KEY (`id`),                                        
UNIQUE KEY `code` (`code`),                                
KEY `brandid` (`brandid`),                                 
KEY `catid` (`catid`),                                     
KEY `itemid` (`itemid`)                                    
);
#Partner stk transfer log table-Shivaraj
CREATE TABLE `t_partner_transfer_request`( `id` BIGINT(20) NOT NULL AUTO_INCREMENT, `transfer_id` VARCHAR(50), `reference_no` VARCHAR(50), `itemid` VARCHAR(50), `product_id` INT(50), `stock_id` INT(50), `transfer_qty` INT(11), `from_loc` VARCHAR(20), `to_loc` VARCHAR(20), `from_rackbin` VARCHAR(20), `to_rackbin` VARCHAR(20), `barcode` VARCHAR(20), `mrp` DOUBLE(10,2), `transfer_remarks` TEXT, `transfer_exp_date` DATETIME, `type` INT(5), `created_by` INT(11), `created_on` DATETIME, PRIMARY KEY (`id`) );
#===============================

/*[4:20:48 PM][85 ms]*/ ALTER TABLE `pnh_m_franchise_info` ADD COLUMN `opt_maxcreditlimit` TINYINT(1) DEFAULT 0 NULL AFTER `tab_simno`; 

#==========================Franchise allow sms==============================================================#
#suresh Aug 25 2014
ALTER TABLE `pnh_m_franchise_info` ADD COLUMN `allow_sms` TINYINT (1) DEFAULT '1' NULL  AFTER `opt_maxcreditlimit`
#==========================Franchise allow sms=============================================================#

/*[6:51:45 PM][648 ms]*/ ALTER TABLE `king_tmp_orders` ADD COLUMN `insurance_id` BIGINT(20) DEFAULT 0 NULL AFTER `approval_status`; 
/*[6:52:17 PM][585 ms]*/ ALTER TABLE `king_tmp_orders` ADD COLUMN `imei_scheme_id` BIGINT(20) DEFAULT 0 NULL AFTER `insurance_id`; 
/*[6:52:47 PM][600 ms]*/ ALTER TABLE `king_tmp_orders` ADD COLUMN `imei_reimbursement_value_perunit` DOUBLE NULL AFTER `imei_scheme_id`; 
/*[6:53:18 PM][575 ms]*/ ALTER TABLE `king_tmp_orders` ADD COLUMN `loyality_point_value` DOUBLE NULL AFTER `imei_reimbursement_value_perunit`; 


/*[4:20:48 PM][85 ms]*/ ALTER TABLE `pnh_m_franchise_info` ADD COLUMN `opt_maxcreditlimit` TINYINT(1) DEFAULT 0 NULL AFTER `tab_simno`; 

CREATE TABLE `pnh_max_credit_update_log` (
  `id` INT(11) NOT NULL AUTO_INCREMENT,
  `franchise_id` BIGINT(11) DEFAULT NULL,
  `status` TINYINT(1) DEFAULT NULL,
  `reason` VARCHAR(255) DEFAULT NULL,
  `created_on` DATETIME DEFAULT NULL,
  `created_by` INT(11) DEFAULT NULL,
  PRIMARY KEY (`id`)
);


/*[4:08:58 PM][121 ms]*/ ALTER TABLE `t_invoice_credit_notes` CHANGE `is_credit_processed` `is_credit_processed` TINYINT(1) DEFAULT 0 NULL COMMENT '1:processed 0:processed'; 

#-==============================
#Sep_13_2014 - Shivaraj Partner Stock Transfer DB changes
 DROP TABLE t_partner_transfer_request;
# Transfer table
CREATE TABLE `t_partner_stock_transfer`( `transfer_id` BIGINT NOT NULL AUTO_INCREMENT COMMENT 'unique transfer_id', `partner_id` INT(11) COMMENT 'related partner id', `partner_transfer_no` VARCHAR(50) COMMENT 'partner unique ref no'
, `transfer_remarks` TEXT, `is_active` INT(10) DEFAULT 1 NULL, `scheduled_transfer_date` DATETIME COMMENT 'for more info', `transfer_status` INT(10) DEFAULT 0, `transfer_date` DATETIME
, `transfer_by` INT(10) COMMENT 'created by userid'
, `modified_by` INT(10) NULL
, `modified_on` DATETIME NULL 
, PRIMARY KEY (`transfer_id`) );

#Transfer deal link table
CREATE TABLE `t_partner_stock_transfer_product_link`( `id` BIGINT NOT NULL AUTO_INCREMENT, `transfer_id` BIGINT(10) COMMENT 'reference transfer_id', `itemid` BIGINT(10), `product_id` INT(100)
, `from_stock_info_id` INT(100) COMMENT 'old stock id', `to_stock_info_id` INT(100) COMMENT 'new stock id', `product_transfer_qty` INT(10) COMMENT 'each product qty'
, `item_transfer_qty` INT(10) COMMENT 'overall transfer qty'
, `transfer_status` TINYINT(1) DEFAULT 0 COMMENT '0:pending,1:reserved,2:packed,3:cancelled,4:shipped'
,`is_active` TINYINT(1) DEFAULT 1 NULL
,`modified_by` INT(10) NULL
,`modified_on` DATETIME NULL COMMENT 'status updated on'
, batched_on DATETIME NULL
, batched_by INT(11) DEFAULT 0
, packed_on DATETIME NULL
, packed_by INT(11) NULL
, batch_qty INT(10) DEFAULT 0 NULL COMMENT 'batch qty'
, scanned_qty INT(10) DEFAULT 0 NULL COMMENT 'how many quantity scanned'
, PRIMARY KEY (`id`) );

# Reserve stock transfer log
CREATE TABLE `t_partner_reserved_batch_stock` (
  `id` BIGINT(11) NOT NULL AUTO_INCREMENT,
  `transfer_id` BIGINT(11) DEFAULT '0',
  `product_id` BIGINT(11) DEFAULT '0',
  `stock_info_id` BIGINT(11) DEFAULT '0',
  `itemid` BIGINT(11) DEFAULT '0',
  `qty` DOUBLE DEFAULT '0',
  `extra_qty` DOUBLE DEFAULT '0',
  `release_qty` DOUBLE DEFAULT '0',
  `reserved_on` DATETIME NULL,
  `released_on` DATETIME NULL,
  `status` TINYINT(1) DEFAULT '0',
  PRIMARY KEY (`id`)
);

#Stock log table updated with transfer id field
ALTER TABLE t_stock_update_log ADD COLUMN transfer_id BIGINT(11) DEFAULT 0;

#return page fix
ALTER TABLE `pnh_t_returns_transit_log` ADD COLUMN `emp_name` VARCHAR(255) NULL AFTER `awb`;
#-==============================

#Sep_13_2014-Shivaraj
# Franchise_type feature updates
ALTER TABLE `pnh_m_franchise_info` ADD COLUMN `franchise_type` INT(1) DEFAULT 0 NULL COMMENT '0:Normal,1:RF(rural),2:RMF(rural_master)' AFTER `pnh_franchise_id`;

#Sep_14_2014-Shivaraj
# Cart table update with cart id
ALTER TABLE `pnh_api_franchise_cart_info` ADD COLUMN `cartid` BIGINT(20) NULL AFTER `updated_on`;
ALTER TABLE `pnh_api_franchise_cart_info` ADD COLUMN `partner_id` INT(11) NULL AFTER `cartid`, ADD COLUMN `ref_itemid` BIGINT(20) NULL AFTER `pid`;

#partner stk reserve table rename
#RENAME TABLE `partner_t_reserved_batch_stock` TO `t_partner_reserved_batch_stock`;

# date field default value removed
#ALTER TABLE `t_partner_stock_transfer_product_link` CHANGE `batched_on` `batched_on` DATETIME NULL;
#ALTER TABLE `t_partner_reserved_batch_stock` CHANGE `reserved_on` `reserved_on` DATETIME NULL, CHANGE `released_on` `released_on` DATETIME NULL;

#Add Indexes for stk transfer table
ALTER TABLE `t_partner_reserved_batch_stock` ADD INDEX (`transfer_id`), ADD INDEX (`product_id`), ADD INDEX (`stock_info_id`), ADD INDEX (`itemid`), ADD INDEX (`status`);
ALTER TABLE `t_partner_stock_transfer` ADD INDEX (`partner_id`), ADD INDEX (`transfer_status`), ADD INDEX (`partner_transfer_no`), ADD INDEX (`is_active`);
ALTER TABLE `t_partner_stock_transfer_product_link` ADD INDEX (`transfer_id`), ADD INDEX (`itemid`), ADD INDEX (`product_id`), ADD INDEX (`transfer_status`), ADD INDEX (`is_active`);
ALTER TABLE `m_partner_deal_link` ADD INDEX (`itemid`), ADD INDEX (`partner_ref_no`), ADD INDEX (`partner_id`);
#-==============================
#Sep_14_2014-Shivaraj - bug fix(_discount cannot be null)
ALTER TABLE `king_invoice` CHANGE `discount` `discount` DECIMAL(10,2) UNSIGNED DEFAULT 0.00 NULL;
ALTER TABLE `t_invoice_credit_notes` ADD COLUMN `is_credit_processed` TINYINT(1) DEFAULT 0 NULL COMMENT '1:processed 0:processed';
#-==============================

#-------------Promo code Management Database updates -----------------
CREATE TABLE `pnh_m_coupons` (                                                                     
                 `id` BIGINT(11) NOT NULL AUTO_INCREMENT,                                                         
                 `coupon_slno` BIGINT(12) NOT NULL,                                                               
                 `coupon_code` BIGINT(14) NOT NULL,                                                               
                 `value` DOUBLE NOT NULL DEFAULT '0',                                                             
                 `value_type` TINYINT(1) DEFAULT '0' COMMENT '0:Rupees ,1:Percentage',                            
                 `min_cart_value` DOUBLE DEFAULT '0',                                                             
                 `franchise_id` BIGINT(11) DEFAULT '0',                                                           
                 `member_id` BIGINT(8) DEFAULT '0',                                                               
                 `menu_id` INT(11) DEFAULT '0',                                                                   
                 `cat_id` INT(11) DEFAULT '0',                                                                    
                 `brand_id` INT(11) DEFAULT '0',                                                                  
                 `pnh_id` BIGINT(20) DEFAULT '0',                                                                 
                 `status` TINYINT(1) DEFAULT '0' COMMENT '0:pending,1:assigned to franchse,2:alloted to member',  
                 `assigned_by` INT(11) DEFAULT '0',                                                               
                 `assigned_on` BIGINT(20) DEFAULT '0',                                                            
                 `alloted_on` BIGINT(20) DEFAULT '0',                                                             
                 `alloted_by` INT(11) DEFAULT '0',                                                                
                 `redeemed_on` BIGINT(20) DEFAULT '0',                                                            
                 `redeemed_by` INT(11) DEFAULT '0',                                                               
                 PRIMARY KEY (`id`,`coupon_slno`,`coupon_code`),                                                  
                 KEY `franchise_id` (`franchise_id`),                                                             
                 KEY `member_id` (`member_id`)                                                                    
               ) ; 

/**************************Market Place Seller DB changes--Start**************************************/

/*[11:47:15 AM][913 ms]*/ ALTER TABLE `pnh_m_franchise_info` ADD COLUMN `billing_type` TINYINT(1) DEFAULT 0 NOT NULL COMMENT '1:B2C 0:B2B' AFTER `max_credit_limit`; 

/*[12:51:24 PM][3604 ms]*/ ALTER TABLE `king_orders` ADD COLUMN `billing_type` TINYINT(1) DEFAULT 0 NOT NULL AFTER `member_price`; 

/*[11:33:37 AM][357 ms]*/ INSERT INTO `m_config_params`(`name`,`value`)VALUES('LAST_B2CINVOICENO','50000000105'); 

ALTER TABLE `user_order_transactions` ADD COLUMN `billing_type` TINYINT(1) DEFAULT 0 NULL AFTER `trans_created_by`, ADD COLUMN `is_consolidated_payment` TINYINT(1) DEFAULT 0 NULL AFTER `billing_type`; 

ALTER TABLE `king_tmp_transactions` ADD COLUMN `billing_type` TINYINT(1) DEFAULT 0 NULL AFTER `is_memberprice`, ADD COLUMN `is_consolidated_payment` TINYINT(1) DEFAULT 0 NULL AFTER `billing_type`; 

ALTER TABLE `king_transactions` ADD COLUMN `billing_type` TINYINT(1) DEFAULT 0 NULL AFTER `is_memberprice`, ADD COLUMN `is_consolidated_payment` TINYINT(1) DEFAULT 0 NULL AFTER `billing_type`; 
  
/*[12:45:58 PM][61 ms]*/ ALTER TABLE `m_seller_info` ADD COLUMN `city` VARCHAR(255) NULL AFTER `address`; 

/*[1:38:41 PM][0 ms]*/ INSERT INTO `m_config_params`(`name`,`value`) VALUES ( 'MARKET_PLACE_SELLER_PROFIT_VAL','10'); 


/*[12:36:52 PM][334 ms]*/ ALTER TABLE `pnh_payment_info` ADD COLUMN `processed_on` DATETIME NULL AFTER `cleared_on`, ADD COLUMN `processed_by` INT(11) NULL AFTER `processed_on`, ADD COLUMN `status` TINYINT(0) NULL AFTER `processed_by`, ADD COLUMN `reference_txt` VARCHAR(2500) NULL AFTER `status`; 
/*[12:40:57 PM][311 ms]*/ ALTER TABLE `pnh_m_franchise_info` ADD COLUMN `payment_mode` INT(11) DEFAULT 0 NULL AFTER `allow_sms`, ADD COLUMN `payment_cycle` INT(11) DEFAULT 0 NULL AFTER `payment_mode`; 

CREATE TABLE `m_seller_info` (
  `id` BIGINT(20) NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(255) DEFAULT NULL,
  `state_id` INT(11) DEFAULT NULL,
  `territory_id` BIGINT(20) DEFAULT NULL,
  `town_id` BIGINT(20) DEFAULT NULL,
  `address` VARCHAR(255) DEFAULT NULL,
  `pincode` BIGINT(20) DEFAULT NULL,
  `contact_no` BIGINT(10) DEFAULT NULL,
  `enable_billing` TINYINT(1) DEFAULT '1',
  `is_active` TINYINT(1) DEFAULT '1',
  `created_on` BIGINT(20) DEFAULT NULL,
  `created_by` INT(11) DEFAULT NULL,
  `modified_on` BIGINT(20) DEFAULT NULL,
  `modified_by` INT(11) DEFAULT NULL,
  PRIMARY KEY (`id`)
);

CREATE TABLE `t_mps_po_info` (
  `id` BIGINT(11) NOT NULL AUTO_INCREMENT,
  `seller_id` BIGINT(20) DEFAULT NULL,
  `transid` VARCHAR(25) DEFAULT NULL,
  `invoice_no` BIGINT(20) DEFAULT NULL,
  `total_value` DOUBLE DEFAULT NULL,
  `status` TINYINT(1) DEFAULT '1' COMMENT '0:cancelled,1:active,2:partial',
  `created_on` BIGINT(20) DEFAULT NULL,
  `created_by` INT(20) DEFAULT NULL,
  `modified_on` BIGINT(20) DEFAULT NULL,
  `modified_by` INT(11) DEFAULT NULL,
  `invoiced_on` BIGINT(20) DEFAULT NULL,
  `invoiced_by` INT(11) DEFAULT NULL,
  PRIMARY KEY (`id`)
);

CREATE TABLE `t_mps_po_product_link` (
  `id` BIGINT(11) NOT NULL AUTO_INCREMENT,
  `po_id` BIGINT(11) DEFAULT NULL,
  `seller_id` BIGINT(11) DEFAULT NULL,
  `order_id` BIGINT(20) DEFAULT NULL,
  `dealid` BIGINT(20) DEFAULT NULL,
  `mrp` DOUBLE DEFAULT NULL,
  `dp_price` DOUBLE DEFAULT NULL,
  `margin` DOUBLE DEFAULT NULL,
  `order_qty` BIGINT(20) DEFAULT NULL,
  `received_qty` BIGINT(20) DEFAULT NULL,
  `is_active` TINYINT(1) DEFAULT '1',
  `status` TINYINT(1) DEFAULT '0' COMMENT '0:not invoiced,1:invoiced,2:canceled',
  `created_on` BIGINT(20) DEFAULT NULL,
  `created_by` INT(11) DEFAULT NULL,
  `modified_on` BIGINT(20) DEFAULT NULL,
  `modified_by` INT(11) DEFAULT NULL,
  PRIMARY KEY (`id`)
);
/**************************Market Place Seller DB changes--End**************************************/

/*[6:31:10 PM][438 ms]*/ ALTER TABLE `pnh_menu_margin_track` ADD COLUMN `rf_mp_margin` DOUBLE DEFAULT 0 NULL AFTER `loyality_pntvalue`, ADD COLUMN `rf_commission` DOUBLE DEFAULT 0 NULL AFTER `rf_mp_margin`, ADD COLUMN `rmf_commssion` DOUBLE DEFAULT 0 NULL AFTER `rf_commission`; 

/*[6:30:21 PM][402 ms]*/ ALTER TABLE `pnh_menu` ADD COLUMN `rf_mp_margin` DOUBLE DEFAULT 0 NULL AFTER `default_mp_margin`, ADD COLUMN `rf_commission` DOUBLE DEFAULT 0 NULL AFTER `rf_mp_margin`, ADD COLUMN `rmf_commission` DOUBLE DEFAULT 0 NULL AFTER `rf_commission`; 

/*[10:36:29 AM][40 ms]*/ ALTER TABLE `t_mps_po_product_link` ADD COLUMN `invoice_no` BIGINT(25) DEFAULT 0 NULL AFTER `status`; 

/*[10:36:49 AM][43 ms]*/ ALTER TABLE `t_mps_po_product_link` ADD COLUMN `invoiced_on` BIGINT(20) NULL AFTER `invoice_no`; 


/************************ Partner Order Import Database updates *****************************/
ALTER TABLE king_orders ADD COLUMN order_imei_nos VARCHAR(255) DEFAULT '';
ALTER TABLE king_tmp_orders ADD COLUMN order_imei_nos VARCHAR(255) DEFAULT '';
/************************ Partner Order Import Database updates *****************************/
#Sep_23_2014
ALTER TABLE m_vendor_product_link ADD COLUMN vendor_site_link VARCHAR(1024) DEFAULT '';
#===============================
#SEP_24_2014
ALTER TABLE `partner_info` ADD INDEX (`partner_rackbinid`);
#====================

****************************Assigning RF TO RMF**************************************/
/*[11:30:21 AM][85 ms]*/ ALTER TABLE `pnh_m_franchise_info` ADD COLUMN `assigned_rmfid` BIGINT(20) DEFAULT 0 NULL AFTER `opt_maxcreditlimit`; 

/*[2:07:53 PM][37 ms]*/ CREATE TABLE `m_rf_rmf_link`( `id` BIGINT(11) NOT NULL AUTO_INCREMENT, `rmf_fid` BIGINT(20), `rf_fid` BIGINT(20), `is_active` TINYINT(1) DEFAULT 1, `created_on` BIGINT(20), `created_by` INT(20), `modified_on` BIGINT(20), `modified_by` INT(20), PRIMARY KEY (`id`) ); 

#===============================
#SEP_25_2014-Shivaraj--MP discount price feature update
ALTER TABLE `king_dealitems` ADD COLUMN `mp_discount_price` DECIMAL(10,2) DEFAULT 0 NOT NULL AFTER `mp_offer_to`;
ALTER TABLE `deal_member_price_changelog` ADD COLUMN `mp_discount_price` DECIMAL(10,2) DEFAULT 0 NOT NULL AFTER `mp_offer_to`;
#==============================
#SEP_26_2014-Shivaraj-PSTK-IMEI table product link id update
ALTER TABLE `t_imei_update_log` ADD COLUMN `transfer_prod_link_id` BIGINT(11) DEFAULT 0 NULL AFTER `cancelled_on`; 
ALTER TABLE `t_partner_reserved_batch_stock` ADD COLUMN `tp_id` BIGINT(11) DEFAULT 0 NULL AFTER `itemid`;
#===========================================
#SEP_27_2014
ALTER TABLE `deal_member_price_changelog` CHANGE `mp_discount_price` `mp_offer_price` DECIMAL(10,2) DEFAULT 0.00 NOT NULL, ADD COLUMN `mp_is_big_offer` TINYINT(1) DEFAULT 0 NOT NULL AFTER `mp_offer_price`;
ALTER TABLE `king_dealitems` CHANGE `mp_discount_price` `mp_offer_price` DECIMAL(10,2) DEFAULT 0.00 NOT NULL, ADD COLUMN `mp_is_big_offer` TINYINT(1) DEFAULT 0 NOT NULL AFTER `mp_offer_price`;

#==================================================
#Oct_13_2014
#===================================================

ALTER TABLE pnh_m_franchise_info ADD COLUMN taluk VARCHAR(255) AFTER locality;
ALTER TABLE pnh_m_franchise_info ADD COLUMN hobli VARCHAR(255) AFTER taluk;
#==================================================
#Oct_18_2014
ALTER TABLE `m_product_info` ADD COLUMN `end_of_life` TINYINT(1) DEFAULT 0 NULL COMMENT '1:end of life,0: normal product' AFTER `sync_product_src`;
#==================================================

#=======================================Alter statement to update courier toll free number============================
/*[12:18:54 PM][1517 ms]*/ ALTER TABLE `m_courier_info` ADD COLUMN `courier_no` BIGINT(12) DEFAULT 0 NULL AFTER `courier_name`; 
#=======================================
# Oct_20_2014-Shivaraj
ALTER TABLE `pnh_users` CHANGE `franchise_id` `reference_id` BIGINT(20) NULL COMMENT 'franchise_id,m_fid';
#===========================
# Oct_21_2014 - Shivaraj temp order table billing type added
ALTER TABLE `king_tmp_orders` ADD COLUMN `billing_type` TINYINT(1) DEFAULT 0 NOT NULL AFTER `order_imei_nos`; 
#===========================
/*[1:38:41 PM][0 ms]*/ INSERT INTO `m_config_params`(`name`,`value`) VALUES ( 'MARKET_PLACE_SELLER_PROFIT_VAL','10'); 

#==================================================
#oct_27_2014
#==================================================

/******************* Member Subscription Plan********************/
			CREATE TABLE `m_member_subscription_plans` (            
                               `id` INT(11) NOT NULL AUTO_INCREMENT,                 
                               `plan_name` VARCHAR(255) DEFAULT NULL,                
                               `plan_desc` TEXT,                                     
                               `created_on` DATETIME DEFAULT NULL,                   
                               `created_by` INT(11) DEFAULT '0',                     
                               PRIMARY KEY (`id`)                                    
                             );

INSERT INTO `m_member_subscription_plans`(`plan_name`,`plan_desc`,`created_on`,`created_by`) VALUES ( 'Plan 1','Pay Rs 2,500/ - Get a Family BOX every month for 5 months delivered + Extra Box in second month',NULL,'0');
INSERT INTO `m_member_subscription_plans`(`plan_name`,`plan_desc`,`created_on`,`created_by`) VALUES ( 'Plan 2','Pay Rs 2,500/- Get a Family BOX every month Delivered worth Rs 600  For 5 Months',NULL,'0'); 
INSERT INTO `m_member_subscription_plans`(`plan_name`,`plan_desc`,`created_on`,`created_by`) VALUES ( 'Plan 3','i.Try Family Combos by Paying Rs 999/- for the 1st TWO months 
ii.Continue the subscription by Paying Rs 999/- for the following two months (3rd & 4th)
iii.Pay Just Rs 500/- & get subscription for the following Two Months (5th & 6th)',NULL,'0'); 

				CREATE TABLE `m_member_subscription_plan_schemes` (      
                                      `id` INT(11) NOT NULL AUTO_INCREMENT,                  
                                      `plan_id` INT(11) DEFAULT '0',                         
                                      `itemid` BIGINT(20) DEFAULT '0',                       
                                      `plan_amount` DOUBLE DEFAULT NULL,                     
                                      `allow_installment` TINYINT(1) DEFAULT '0',            
                                      `installment_month` TINYINT(1) DEFAULT '0',            
                                      `installment_max_amount` DOUBLE DEFAULT NULL,          
                                      `reward_part_bymon` INT(4) DEFAULT '0',                
                                      `extra_subscription` INT(4) DEFAULT '0',               
                                      `reward_part_amount` DOUBLE DEFAULT '0',               
                                      `plan_amount_part` DOUBLE DEFAULT '0',                 
                                      `total_months` INT(4) DEFAULT '0',                     
                                      `created_on` DATETIME DEFAULT NULL,                    
                                      `created_by` INT(11) DEFAULT '0',                      
                                      `modified_on` DATETIME DEFAULT NULL,                   
                                      `modified_by` INT(11) DEFAULT '0',                     
                                      PRIMARY KEY (`id`)                                     
                                    );
INSERT  INTO `m_member_subscription_plan_schemes`(`id`,`plan_id`,`itemid`,`plan_amount`,`allow_installment`,`reward_part_bymon`,`reward_part_amount`,`plan_amount_part`,`total_months`,`created_on`,`created_by`,`modified_on`,`modified_by`)
 VALUES (1,1,533429885753,1500,0,2,300,1500,5,NULL,0,NULL,0),
(2,1,105148805811,2500,0,2,500,2500,5,NULL,0,NULL,0),
(3,1,498456097020,3750,0,2,750,3750,5,NULL,0,NULL,0),
(4,1,681521167402,5000,0,2,1000,5000,5,NULL,0,NULL,0),
(5,2,764002408891,1500,0,0,400,1500,5,NULL,0,NULL,0),
(6,2,418901413789,2500,0,0,600,2500,5,NULL,0,NULL,0),
(7,2,678782841184,3750,0,0,900,3750,5,NULL,0,NULL,0),
(8,2,403615238350,5000,0,0,1200,5000,5,NULL,0,NULL,0),
(9,3,105148805811,2500,1,6,500,2500,6,NULL,0,NULL,0),
(10,3,677142092378,5000,1,6,1000,5000,6,NULL,0,NULL,0);


		CREATE TABLE `m_member_plan_link` (                     
                      `id` INT(11) NOT NULL AUTO_INCREMENT,                 
                      `member_id` INT(11) DEFAULT '0',                      
                      `sub_franchise_id` INT(11) DEFAULT '0',               
                      `sub_plan_id` INT(11) DEFAULT '0',                    
                      `member_family_count` INT(11) DEFAULT '0',            
                      `is_paid` INT(11) DEFAULT '0',                        
                      `receipt_id` INT(11) DEFAULT '0',                     
                      `paid_amount` DOUBLE DEFAULT '0',                     
                      `is_active` INT(11) DEFAULT '0',                      
                      `start_date` DATE DEFAULT NULL,                       
                      `end_date` DATE DEFAULT NULL,                         
                      `created_on` DATETIME DEFAULT NULL,                   
                      `created_by` INT(11) DEFAULT '0',                     
                      `modified_on` DATETIME DEFAULT NULL,                  
                      `modified_by` INT(11) DEFAULT '0',                    
                      PRIMARY KEY (`id`)                                    
                    );

		CREATE TABLE `m_member_subscription_plan_orderlist` (   
                                        `id` INT(11) NOT NULL AUTO_INCREMENT,                 
                                        `member_id` INT(11) DEFAULT '0',                      
                                        `sub_franchise_id` INT(11) DEFAULT '0',               
                                        `itemid` BIGINT(20) DEFAULT '0',                      
                                        `order_id` INT(11) DEFAULT '0',                       
                                        `order_qty` INT(11) DEFAULT '0',                      
                                        `order_amount` DOUBLE DEFAULT '0',                    
                                        `order_date` DATE DEFAULT NULL,                       
                                        `is_active` INT(11) DEFAULT '0',                      
                                        `created_on` DATETIME DEFAULT NULL,                   
                                        `created_by` INT(11) DEFAULT '0',                     
                                        PRIMARY KEY (`id`)                                    
                                      );


			CREATE TABLE `m_member_feedback_link` (                 
                          `id` INT(11) NOT NULL AUTO_INCREMENT,                 
                          `member_id` INT(11) DEFAULT '0',                      
                          `feedback_id` INT(11) DEFAULT '0',                    
                          `product_name` VARCHAR(255) DEFAULT NULL,             
                          `price_range` VARCHAR(255) DEFAULT NULL,              
                          `brand_name` VARCHAR(255) DEFAULT NULL,               
                          `color` VARCHAR(255) DEFAULT NULL,                    
                          `created_on` DATETIME DEFAULT NULL,                   
                          `created_by` INT(11) DEFAULT '0',                     
                          `modified_on` DATETIME DEFAULT NULL,                  
                          `modified_by` INT(11) DEFAULT '0',                    
                          PRIMARY KEY (`id`)                                    
                        );

			CREATE TABLE `m_member_family_list` (         
                        `id` INT(10) NOT NULL AUTO_INCREMENT,       
                        `member_id` INT(10) NOT NULL,               
                        `family_member_name` VARCHAR(70) NOT NULL,  
                        `relationship` VARCHAR(70) NOT NULL,        
                        `age` INT(11) NOT NULL,                     
                        `created_on` DATETIME DEFAULT NULL,         
                        `created_by` INT(11) DEFAULT '0',           
                        `modified_on` DATETIME DEFAULT NULL,        
                        `modified_by` INT(11) DEFAULT '0',          
                        PRIMARY KEY (`id`)                          
                      );

		CREATE TABLE `m_combo_categories` (                      
                      `id` INT(11) NOT NULL AUTO_INCREMENT,                  
                      `gender_attr` VARCHAR(20) DEFAULT NULL,                
                      `catid` INT(11) DEFAULT NULL,                          
                      `created_on` DATETIME DEFAULT NULL,                    
                      `created_by` INT(11) DEFAULT '0',                      
                      `modified_on` DATETIME DEFAULT NULL,                   
                      `modified_by` INT(11) DEFAULT '0',                     
                      PRIMARY KEY (`id`)                                     
                    );
INSERT INTO `m_combo_categories`(`gender_attr`,`catid`,`created_on`,`created_by`,`modified_on`,`modified_by`) VALUES ( 'MEN','119',NULL,'0',NULL,'0');
INSERT INTO `m_combo_categories`(`gender_attr`,`catid`,`created_on`,`created_by`,`modified_on`,`modified_by`) VALUES ( 'MEN','94',NULL,'0',NULL,'0');
INSERT INTO `m_combo_categories`(`gender_attr`,`catid`,`created_on`,`created_by`,`modified_on`,`modified_by`) VALUES ( 'MEN','89',NULL,'0',NULL,'0');
INSERT INTO `m_combo_categories`(`gender_attr`,`catid`,`created_on`,`created_by`,`modified_on`,`modified_by`) VALUES ( 'MEN','170',NULL,'0',NULL,'0');
INSERT INTO `m_combo_categories`(`gender_attr`,`catid`,`created_on`,`created_by`,`modified_on`,`modified_by`) VALUES ( 'MEN','91',NULL,'0',NULL,'0');
INSERT INTO `m_combo_categories`(`gender_attr`,`catid`,`created_on`,`created_by`,`modified_on`,`modified_by`) VALUES ( 'MEN','155',NULL,'0',NULL,'0');
INSERT INTO `m_combo_categories`(`gender_attr`,`catid`,`created_on`,`created_by`,`modified_on`,`modified_by`) VALUES ( 'MEN','116',NULL,'0',NULL,'0');
INSERT INTO `m_combo_categories`(`gender_attr`,`catid`,`created_on`,`created_by`,`modified_on`,`modified_by`) VALUES ( 'BABY','296',NULL,'0',NULL,'0');
INSERT INTO `m_combo_categories`(`gender_attr`,`catid`,`created_on`,`created_by`,`modified_on`,`modified_by`) VALUES ( 'BABY','1300',NULL,'0',NULL,'0');
INSERT INTO `m_combo_categories`(`gender_attr`,`catid`,`created_on`,`created_by`,`modified_on`,`modified_by`) VALUES ( 'BABY','295',NULL,'0',NULL,'0');
INSERT INTO `m_combo_categories`(`gender_attr`,`catid`,`created_on`,`created_by`,`modified_on`,`modified_by`) VALUES ( 'WOMEN','98',NULL,'0',NULL,'0');
INSERT INTO `m_combo_categories`(`gender_attr`,`catid`,`created_on`,`created_by`,`modified_on`,`modified_by`) VALUES ( 'WOMEN','216',NULL,'0',NULL,'0');
INSERT INTO `m_combo_categories`(`gender_attr`,`catid`,`created_on`,`created_by`,`modified_on`,`modified_by`) VALUES ( 'WOMEN','101',NULL,'0',NULL,'0');
INSERT INTO `m_combo_categories`(`gender_attr`,`catid`,`created_on`,`created_by`,`modified_on`,`modified_by`) VALUES ( 'WOMEN','159',NULL,'0',NULL,'0');
INSERT INTO `m_combo_categories`(`gender_attr`,`catid`,`created_on`,`created_by`,`modified_on`,`modified_by`) VALUES ( 'WOMEN','1117',NULL,'0',NULL,'0');

			
#==================================================
#oct_29_2014
#==================================================

CREATE TABLE `m_category_plan_type_list` (              
                             `id` INT(11) NOT NULL AUTO_INCREMENT,                 
                             `gender_attr` VARCHAR(20) DEFAULT NULL,               
                             `cat_plan_name` VARCHAR(100) DEFAULT NULL,            
                                PRIMARY KEY (`id`)                                    
                              );


/*Data for the table `m_category_plan_type_list` */

INSERT  INTO `m_category_plan_type_list`(`gender_attr`,`cat_plan_name`) VALUES ('MEN','Top 3 Brand Preference for MEN Products'),('BABY','Top 3 Brand Preference for BABY care Products'),('WOMEN','Top 3 Brand Preference for Women  Products');

/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;

				CREATE TABLE `m_member_subscription_plan_orderlist` (   
                                        `id` INT(11) NOT NULL AUTO_INCREMENT,                 
                                        `member_id` INT(11) DEFAULT '0',                      
                                        `sub_franchise_id` INT(11) DEFAULT '0',               
                                        `itemid` BIGINT(20) DEFAULT '0',                      
                                        `order_id` INT(11) DEFAULT '0',                       
                                        `order_qty` INT(11) DEFAULT '0',                      
                                        `order_amount` DOUBLE DEFAULT '0',                    
                                        `order_date` DATE DEFAULT NULL,                       
                                        `is_active` INT(11) DEFAULT '0',                      
                                        `created_on` DATETIME DEFAULT NULL,                   
                                        `created_by` INT(11) DEFAULT '0',                     
                                        PRIMARY KEY (`id`)                                    
                                      );

			CREATE TABLE `m_franchise_combo_preference` (           
                                `id` INT(11) NOT NULL AUTO_INCREMENT,                 
                                `franchise_id` INT(11) DEFAULT '0',                   
                                `franchise_name` VARCHAR(100) DEFAULT NULL,           
                                `name` VARCHAR(100) DEFAULT NULL,                     
                                `mobile` BIGINT(11) DEFAULT '0',                      
                                `created_by` INT(11) DEFAULT '0',                     
                                `created_on` DATETIME DEFAULT NULL,                   
                                PRIMARY KEY (`id`)                                    
                              );
				CREATE TABLE `m_franchise_combo_preference_link` (       
                                     `id` INT(11) NOT NULL AUTO_INCREMENT,                  
                                     `cp_id` INT(11) DEFAULT '0',                           
                                     `combo_gender` VARCHAR(11) DEFAULT NULL,               
                                     `catid` INT(11) DEFAULT '0',                           
                                     `preference_no` INT(11) DEFAULT '0',                   
                                     `pref_brandid` INT(11) DEFAULT '0',                    
                                     `created_on` DATETIME DEFAULT NULL,                    
                                     `created_by` INT(11) DEFAULT '0',                      
                                     `modified_on` DATETIME DEFAULT NULL,                   
                                     `modified_by` INT(11) DEFAULT '0',                     
                                     PRIMARY KEY (`id`)                                     
                                   );
			CREATE TABLE `m_member_plan_receipt_list` (              
                              `id` INT(11) NOT NULL AUTO_INCREMENT,                  
                              `member_id` INT(11) DEFAULT '0',                       
                              `ord_planid` INT(11) DEFAULT '0',                      
                              `is_paid` INT(11) DEFAULT '0',                         
                              `receipt_id` INT(11) DEFAULT '0',                      
                              `receipt_amount` DOUBLE DEFAULT NULL,                  
                              `paid_date` DATE DEFAULT NULL,                         
                              `created_on` DATETIME DEFAULT NULL,                    
                              `created_by` INT(11) DEFAULT '0',                      
                              PRIMARY KEY (`id`)                                     
                            );


ALTER TABLE m_member_plan_link ADD COLUMN allow_installment  INT(11) DEFAULT 0 NOT NULL AFTER sub_plan_id;
ALTER TABLE m_member_subscription_plan_schemes ADD COLUMN `total_installment` TINYINT(1) DEFAULT '0' AFTER allow_installment;
ALTER TABLE `king_orders` ADD COLUMN `expected_ship_date` DATE NULL AFTER `billing_type`;  
#==================================================
#Nov_03_2014
#==================================================
ALTER TABLE `m_member_subscription_plan_orderlist` CHANGE `order_id` `order_id` CHAR( 18 ) NOT NULL DEFAULT '0'
ALTER TABLE `m_member_subscription_plan_orderlist` CHANGE `order_id` `order_id` BIGINT( 20 ) NOT NULL DEFAULT '0'
ALTER TABLE m_member_subscription_plan_orderlist ADD COLUMN transid  CHAR( 18 ) NOT NULL DEFAULT '0' AFTER order_id;
                                   
#=======================================================
#Nov_03_2014-Shivaraj - Return partner stock changes
ALTER TABLE `t_partner_stock_transfer` ADD COLUMN `transfer_option` TINYINT(11) DEFAULT 1 NULL COMMENT '1:to partner,2:from partner' AFTER `partner_id`;
ALTER TABLE `t_partner_reserved_batch_stock` ADD COLUMN `transfer_option` TINYINT(11) DEFAULT 1 NULL COMMENT '1:to partner,2:from partner' AFTER `transfer_id`;
#=======================================================
#Nov_04_2014-Shivaraj - Partner Transfer page search changes
ALTER TABLE `t_stock_info` ADD INDEX (`product_barcode`); 
#==================================
#Nov_06_2014 - Shivaraj - Missing billing type & consolidated payment fields
ALTER TABLE `king_tmp_transactions` ADD COLUMN `billing_type` TINYINT(1) DEFAULT 0 NULL AFTER `pnh_member_fee`;
ALTER TABLE `king_tmp_transactions` ADD COLUMN `is_consolidated_payment` TINYINT(1) DEFAULT 0 NULL AFTER `billing_type`;

ALTER TABLE `king_transactions` ADD COLUMN `billing_type` TINYINT(1) DEFAULT 0 NULL AFTER `pnh_member_fee`;
ALTER TABLE `king_transactions` ADD COLUMN `is_consolidated_payment` TINYINT(1) DEFAULT 0 NULL AFTER `billing_type`;
#==================================

#Nov_08_2014 - Shivaraj - Missing billing type & consolidated payment fields
ALTER TABLE `user_order_transactions` ADD COLUMN `billing_type` TINYINT(1) DEFAULT 0 NULL AFTER `pnh_member_fee`;
ALTER TABLE `user_order_transactions` ADD COLUMN `is_consolidated_payment` TINYINT(1) DEFAULT 0 NULL AFTER `billing_type`;
#===============================

ALTER TABLE `king_orders` ADD COLUMN `expected_ship_date` DATE   NULL  AFTER `customer_prescrption`
#===============================
# Nov_10_2014-Shivaraj-created_by field added
ALTER TABLE `support_tickets` ADD COLUMN `created_by` INT(20) NULL AFTER `from_app`;
# Nov_10_2014-Shivaraj-updated created_by field with userid
UPDATE support_tickets t 
JOIN king_admin a ON a.id=t.user_id
SET t.created_by=t.user_id WHERE a.id=t.user_id;
#===============================
#==================================================
#Nov_11_2014
#==================================================
ALTER TABLE `pnh_menu` ADD COLUMN `order_notify_to` VARCHAR(255)  AFTER `status`; 
#==================================================
#Nov_12_2014
#==================================================
ALTER TABLE `pnh_towns` CHANGE `created_on` `created_on` DATETIME DEFAULT NULL
ALTER TABLE `pnh_towns` ADD COLUMN `created_by` INT(20) DEFAULT '0'  AFTER `created_on`; 

/*[12:36:52 PM][334 ms]*/ ALTER TABLE `pnh_payment_info` ADD COLUMN `processed_on` DATETIME NULL AFTER `cleared_on`, ADD COLUMN `processed_by` INT(11) NULL AFTER `processed_on`, ADD COLUMN `status` TINYINT(0) NULL AFTER `processed_by`, ADD COLUMN `reference_txt` VARCHAR(2500) NULL AFTER `status`; 
/*[12:40:57 PM][311 ms]*/ ALTER TABLE `pnh_m_franchise_info` ADD COLUMN `payment_mode` INT(11) DEFAULT 0 NULL AFTER `allow_sms`, ADD COLUMN `payment_cycle` INT(11) DEFAULT 0 NULL AFTER `payment_mode`; 


#Nov_20_2014 - Shivaraj
ALTER TABLE `pnh_payment_info` ADD COLUMN `payment_mode` INT(11) DEFAULT 0 NULL AFTER `reference_txt`; 
#===============================

/*[12:05:50 PM][762 ms]*/ ALTER TABLE `pnh_franchise_account_summary` ADD COLUMN `payment_id` INT(11) DEFAULT 0 NULL AFTER `unreconciled_status`; 

/*[11:31:58 AM][66 ms]*/ ALTER TABLE `pnh_payment_info` ADD COLUMN `payment_cycle` TINYINT(1) DEFAULT 0 NULL AFTER `payment_mode`; 

#===============================
#Nov 24 2014 --- Suresh
CREATE TABLE `m_employee_franchise_territory_link` (  `sno` INT (11) , `employee_franchise_id` BIGINT (20) , `territory_id` BIGINT (20) , `is_active` TINYINT (1) DEFAULT '1', `created_on` DATE , `created_by` VARCHAR (255) )  
#----------------------------------
#===============================
#Nov_20_2014 - Shivaraj - Member type -free or paid, collect member fee flag in member table
ALTER TABLE `pnh_member_info` ADD COLUMN `member_type` TINYINT(1) DEFAULT 0 NULL COMMENT '0:free,1:paid' AFTER `voucher_bal_validity`; 
ALTER TABLE `pnh_member_info` ADD COLUMN `member_fee_collected` TINYINT(1) DEFAULT 0 NULL AFTER `member_type`;
ALTER TABLE `pnh_member_info` ADD COLUMN `member_fee` FLOAT NULL AFTER `member_fee_collected`, ADD COLUMN `member_fee_invoice` VARCHAR(50) NULL AFTER `member_fee`;

#Nov_22_2014 - Member fee changes
ALTER TABLE `user_order_transactions` ADD COLUMN `pnh_member_fee` FLOAT NULL AFTER `trans_created_by`;
#===============================